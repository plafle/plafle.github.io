<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"plafle.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="plafle&#39;s blog">
<meta property="og:url" content="http://plafle.github.io/index.html">
<meta property="og:site_name" content="plafle&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="plafle">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://plafle.github.io/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>plafle's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">
      <img class="custom-logo-image" src="/images/logo.jpg" alt="plafle's blog">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">plafle's blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">the pursuit of rationalism</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">plafle</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">33</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2025/05/04/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E4%B9%98%E6%95%B0%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/05/04/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E4%B9%98%E6%95%B0%E6%B3%95/" class="post-title-link" itemprop="url">拉格朗日乘数法复习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-05-04 13:48:18 / 修改时间：14:16:12" itemprop="dateCreated datePublished" datetime="2025-05-04T13:48:18+08:00">2025-05-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="拉格朗日乘数法复习">拉格朗日乘数法复习</h3>
<p><span class="math inline">\(\hspace{1cm}\)</span>
给定一个多元函数<span class="math inline">\(f(\bold{x})\)</span>,
和若干个限制：<span class="math inline">\(g_1(\bold{x}) = g_2(\bold{x})
= ... = g_m(\bold{x}) = 0\)</span>, 求<span
class="math inline">\(f(\bold{x})\)</span>的最小值。这里的<span
class="math inline">\(\bold{x}\)</span>是一个向量。<span
class="math inline">\(\bold{x} = \{x_1,x_2,...x_n\}\)</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 设<span
class="math inline">\(L(\bold{x}, \lambda_1, \lambda_2, ..., \lambda_m)
= f(\bold{x}) - \lambda_1g_1(\bold{x}) - ... -
\lambda_mg_m(\bold{x})\)</span>,若<span
class="math inline">\(\frac{\partial L}{\partial \bold{x}} =
\bold{0}\)</span>，<span class="math inline">\(\forall i \in
[1,m],\frac{\partial L}{\partial \lambda_i} = 0\)</span>, 则此时的<span
class="math inline">\(\bold{x}\)</span>是一个候选的极小值点（极小值点必定在这样的一个<span
class="math inline">\(\bold{x}\)</span>中）</p>
<p>证明：</p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 考虑<span
class="math inline">\(\bold{x} = \bold{x_0}\)</span>时，此时<span
class="math inline">\(\bold{x}\)</span>想要有任何的微小位移<span
class="math inline">\(\Delta \bold{x}\)</span>,都必须满足： <span
class="math display">\[
\Delta \bold{x} \cdot \nabla g_i(\bold{x_0}) = 0 \ \ \ \forall i
\in[1,m]
\]</span> <span class="math inline">\(\hspace{1cm}\)</span>
我们称任意一个满足上式的微小位移<span class="math inline">\(\Delta
\bold{x}\)</span>为合法微小位移。</p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 若<span
class="math inline">\(\bold{x_0}\)</span>还是一个最小值点，那么对于<strong>任意</strong>一个合法微小位移，它肯定需要满足：
<span class="math display">\[
\Delta \bold{x} \cdot \nabla f(\bold{x_0}) = 0
\]</span> <span class="math inline">\(\hspace{1cm}\)</span>
因为对于<strong>任意</strong>一个合法微小位移都需要满足，所以显然<span
class="math inline">\(\nabla f(\bold{x_0})\)</span>必定在<span
class="math inline">\(\nabla
g_i(\bold{x_0})\)</span>张成的线性空间里。这就对应：<span
class="math inline">\(\frac{\partial L}{\partial \bold{x}} =
\bold{0}\)</span>的这个条件。至于<span class="math inline">\(\forall i
\in [1,m],\frac{\partial L}{\partial \lambda_i} =
0\)</span>，这是为了满足约束条件而显然必须的条件。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2025/01/27/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/27/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-27 20:45:35" itemprop="dateCreated datePublished" datetime="2025-01-27T20:45:35+08:00">2025-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very
first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for
more info. If you get any problems when using Hexo, you can find the
answer in <a
target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or
you can ask me on <a
target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start">Quick Start</h2>
<h3 id="create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a
target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a
target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a
target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2025/01/01/%E6%A6%82%E7%8E%87%E8%AE%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/01/%E6%A6%82%E7%8E%87%E8%AE%BA/" class="post-title-link" itemprop="url">概率论</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2025-01-01T00:00:00+08:00">2025-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-02-06 20:18:11" itemprop="dateModified" datetime="2025-02-06T20:18:11+08:00">2025-02-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="概率论">概率论</h3>
<h4 id="泊松分布">1. 泊松分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 定义为<span
class="math inline">\(P(x=k) = \frac{\lambda
^k}{k!}e^{-\lambda}\)</span>，<span class="math inline">\(\lambda &gt;
0\)</span>，也可以记作<span class="math inline">\(X\)</span> ~ <span
class="math inline">\(P(\lambda)\)</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span>
对于一个二项分布<span class="math inline">\(B(n,p)\)</span>，如果<span
class="math inline">\(n\)</span>比较大，<span
class="math inline">\(np\)</span>适中（<span class="math inline">\(n \ge
100， np \le 10\)</span>）那么可以把二项分布<span
class="math inline">\(B(n,p)\)</span>近似为<span
class="math inline">\(P(np)\)</span></p>
<h4 id="超几何分布">2. 超几何分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 定义为<span
class="math inline">\(H(N,M,n)\)</span>，表示从有限<span
class="math inline">\(N\)</span>个物品中（其中包含<span
class="math inline">\(M\)</span>个指定种类的物件）中抽出<span
class="math inline">\(n\)</span>个物件，成功抽出该指定种类的物件的次数（不放回）</p>
<h4 id="均匀分布">3. 均匀分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 即在<span
class="math inline">\([a,b]\)</span>范围内等概率分布的情况，记作<span
class="math inline">\(X\)</span> ~ <span
class="math inline">\(U(a,b)\)</span></p>
<h4 id="指数分布">4. 指数分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 其概率密度函数为
<span class="math display">\[
f(x) = \begin{cases}\lambda e^{-\lambda x}\ \ \ \ x &gt; 0\\ 0 \ \ \ \ \
\ \ \ \ \ \ \ x \le 0 \end{cases}
\]</span> <span class="math inline">\(\hspace{1cm}\)</span> 记作<span
class="math inline">\(X\)</span> ~ <span
class="math inline">\(Exp(\lambda)\)</span></p>
<h4 id="几何分布">5. 几何分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 定义为<span
class="math inline">\(P(X = k) = (1 - p)^{k - 1} \times
p\)</span>，也可记作<span class="math inline">\(X\)</span> ~ <span
class="math inline">\(G(p)\)</span>，表示第<span
class="math inline">\(k\)</span>次刚好第一次发生概率为<span
class="math inline">\(p\)</span>的事</p>
<h4 id="正态分布">6. 正态分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 其密度函数记为
<span class="math display">\[
\varphi(x) = \frac 1{\sqrt{2\pi} \sigma}e^{-\frac{(x -
\mu)^2}{2\sigma^2}}
\]</span> <span class="math inline">\(\hspace{1cm}\)</span> 记作<span
class="math inline">\(X\)</span> ~ <span class="math inline">\(N(\mu,
\sigma^2)\)</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 其分布函数记为<span
class="math inline">\(\Phi(x) = \int_{-\infty}^x \phi(t) dt\)</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 当<span
class="math inline">\(\mu = 0, \sigma =
1\)</span>时，认为是标准正态分布，其概率密度函数记为<span
class="math inline">\(\varphi_0(x)\)</span>，分布函数记为<span
class="math inline">\(\Phi_0(x)\)</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span>
对于任何任意一个<span class="math inline">\(\varphi(x)\)</span>，有<span
class="math inline">\(\varphi(x) = \frac 1 \sigma \varphi_0(\frac {x -
\mu}{\sigma})\)</span>，以及<span class="math inline">\(\Phi(x) =
\Phi_0(\frac{x - \mu}{\sigma})\)</span></p>
<h3 id="多维随机变量相关">多维随机变量相关</h3>
<h4
id="多维随机变量的联合分布函数以及边缘分布函数对于离散型和连续型均适用">1.多维随机变量的联合分布函数，以及边缘分布函数（对于离散型和连续型均适用）</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span>
仿照单元模式，我们有如下定义：<span class="math inline">\(F(x,y) = P(X
\le x, Y \le y)\)</span> 为<span
class="math inline">\((X,Y)\)</span>的联合分布函数</p>
<p><span class="math inline">\(\hspace{1cm}\)</span>
根据定义，容易证明</p>
<p><span class="math display">\[
P(x_1 &lt; X \le x_2, y_1 &lt; Y \le y_2) = F(x_2,y_2) - F(x_1,y_2) -
F(x_2,y_1) + F(x_1,y_1)
\]</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 注意到<span
class="math inline">\(F(x,y)\)</span>有如下性质：</p>
<p><span class="math display">\[
F(-\infty,y) = F(x, -\infty) = 0
\]</span></p>
<p><span class="math display">\[
F(-\infty,-\infty) = 0, F(+\infty,+\infty) = 1
\]</span></p>
<p><span class="math inline">\(\hspace{1cm}\)</span>
定义边缘分布函数：称<span
class="math inline">\(F_X(x),F_Y(y)\)</span>分别为<span
class="math inline">\((X,Y)\)</span>关于<span
class="math inline">\(X\)</span>和<span
class="math inline">\(Y\)</span>的边缘分布函数，其中<span
class="math inline">\(F_X(x) = F(x,+\infty)\)</span>，<span
class="math inline">\(F_Y(y) = F(y, +\infty)\)</span>。</p>
<h4 id="多维随机变量的联合概率密度以及边缘概率密度连续型">2.
多维随机变量的联合概率密度以及边缘概率密度（连续型）</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 若存在二元函数<span
class="math inline">\(f(x,y)\)</span>使得<span
class="math inline">\(\int_{-\infty}^x \int_{-\infty}^y f(u,v)dudv =
F(x,y)\)</span>，则称<span
class="math inline">\(f(x,y)\)</span>为联合概率密度</p>
<p><span class="math inline">\(\hspace{1cm}\)</span>
定义边缘概率密度函数：称<span class="math inline">\(f_X(x),
f_Y(y)\)</span>分别为<span class="math inline">\((X,Y)\)</span>关于<span
class="math inline">\(X\)</span>和<span
class="math inline">\(Y\)</span>的边缘密度函数，其中<span
class="math inline">\(f_X(x) =
\int_{-\infty}^{+\infty}f(x,y)dy\)</span>, <span
class="math inline">\(f_Y(y) =
\int_{-\infty}^{+\infty}f(x,y)dx\)</span></p>
<p>​</p>
<h4 id="多维随机变量的联合分布列以及边缘分布列离散型">3.
多维随机变量的联合分布列以及边缘分布列（离散型）</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 若<span
class="math inline">\((X,Y)\)</span>均是离散的，那么定义<span
class="math inline">\(p_{ij} =P(X = x_i, Y =
y_i)\)</span>为联合分布列</p>
<p><span class="math inline">\(\hspace{1cm}\)</span> 同时定义<span
class="math inline">\(p_{i·} = \sum_j p_{ij}\)</span>为<span
class="math inline">\((X,Y)\)</span>关于<span
class="math inline">\(X\)</span>的边缘分布列，<span
class="math inline">\(p_{·j} =\sum _i p_{ij}\)</span> 为<span
class="math inline">\((X,Y)\)</span>关于<span
class="math inline">\(Y\)</span>的边缘分布列</p>
<h4 id="多维变量的分布">4. 多维变量的分布</h4>
<p><span class="math inline">\(\hspace{1cm}\)</span> 设<span
class="math inline">\(Z = \frac XY\)</span>，且<span
class="math inline">\(f(x,y)\)</span>表示变量<span
class="math inline">\(X,Y\)</span>的联合概率密度函数，则有： <span
class="math display">\[
f_Z(z) = \int_{-\infty}^{+\infty} |y| f(yz,y)dy
\]</span></p>
<h3 id="期望方差协方差">期望，方差，协方差</h3>
<ul>
<li><p>常见分布的期望和方差：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>E:期望</th>
<th>D：方差</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="math inline">\(U(a,b)\)</span></td>
<td><span class="math inline">\(\frac {a + b}2\)</span></td>
<td><span class="math inline">\(\frac{(b - a)^2}{12}\)</span></td>
</tr>
<tr>
<td><span class="math inline">\(P(\lambda)\)</span></td>
<td><span class="math inline">\(\lambda\)</span></td>
<td><span class="math inline">\(\lambda\)</span></td>
</tr>
<tr>
<td><span class="math inline">\(E(\lambda)\)</span></td>
<td><span class="math inline">\(\frac 1\lambda\)</span></td>
<td><span class="math inline">\(\frac 1{\lambda^2}\)</span></td>
</tr>
<tr>
<td><span class="math inline">\(G(p)\)</span></td>
<td><span class="math inline">\(\frac 1p\)</span></td>
<td><span class="math inline">\(\frac q{p^2}\)</span></td>
</tr>
<tr>
<td><span class="math inline">\(N(\mu, \sigma^2)\)</span></td>
<td><span class="math inline">\(\mu\)</span></td>
<td><span class="math inline">\(\sigma^2\)</span></td>
</tr>
<tr>
<td><span class="math inline">\(B(n,p)\)</span></td>
<td><span class="math inline">\(np\)</span></td>
<td><span class="math inline">\(npq\)</span></td>
</tr>
</tbody>
</table>
<p>注：<span class="math inline">\(E(\lambda)\)</span>为指数分布，<span
class="math inline">\(G(p)\)</span>为几何分布，<span
class="math inline">\(q = 1 - p\)</span></p></li>
<li><p>切比雪夫不等式： 对于一切分布<span
class="math inline">\(X\)</span>，有： <span class="math display">\[
P(|X - EX| &gt; \varepsilon) \le \frac {DX}{\varepsilon^2}
\]</span></p></li>
<li><p>注意：如果随机变量<span
class="math inline">\(X,Y\)</span>满足<span class="math inline">\(E(XY)
= E(X)E(Y)\)</span>那么不能说明<span
class="math inline">\(X\)</span>和<span
class="math inline">\(Y\)</span>是独立的！</p></li>
<li><p>对于任意随机变量<span
class="math inline">\(X_1,X_2,...,X_n\)</span>以及任意常数<span
class="math inline">\(k_0,k_1,...,k_n\)</span>，我们有： <span
class="math display">\[
D(k_0 + k_1X_1+ k_2X_2 + ... + k_nX_n) = \sum_{i = 1}^n{k_i}^2DX_i + 2
\sum_{1 \le i &lt; j \le n}k_ik_jCov(X_i,X_j)
\]</span></p></li>
<li><p>Cauchy-schwarz inequation: <span class="math display">\[
EX^2 \times EY^2 \ge (E[XY])^2
\]</span></p></li>
<li><p>最小二乘法拟合：对于随机变量<span
class="math inline">\(X,Y\)</span>，尝试用<span class="math inline">\(y
= \hat{a}x + \hat{b}\)</span>拟合，那么最好的拟合直线中: <span
class="math display">\[
\hat{a} = \rho_{XY} \sqrt{\frac {DY}{DX} }, \hat{b} = EY - \hat{a}EX
\]</span></p></li>
<li><p>若<span class="math inline">\((X,Y)\)</span>服从二维正态分布<span
class="math inline">\(N(\mu_1,\mu_2,{\sigma_1}^2,{\sigma_2}^2,\rho)\)</span>，那么<span
class="math inline">\(Cov(X,Y) = \sigma_1\sigma_2\rho\)</span></p></li>
<li><p>条件期望的概念：书p69开始，注意：<span
class="math inline">\(E(X|Y)\)</span>是一个关于<span
class="math inline">\(Y\)</span>的函数，也是一个随机变量，而<span
class="math inline">\(E(X|Y = y)\)</span>是一个常数。全期望公式： <span
class="math display">\[
E(X) = E[E(X|Y)]
\]</span></p></li>
</ul>
<h3 id="数理统计部分">数理统计部分</h3>
<ul>
<li><p><strong>样本方差</strong>的定义：设有<span
class="math inline">\(n\)</span>个样本<span
class="math inline">\(X_1,X_2,...,X_n\)</span>，则定义样本方差 <span
class="math display">\[
S^2 = \frac 1{n - 1} \sum_{i = 1}^n(X_i - \bar{X})^2
\]</span> 其中： <span class="math display">\[
\bar{X} = \frac 1n \sum_{i = 1}^nX_i
\]</span></p></li>
<li><p>设<span
class="math inline">\(n\)</span>个样本都是独立同分布的，且每个样本作为随机变量均值为<span
class="math inline">\(\mu\)</span>,方差为<span
class="math inline">\(\sigma^2\)</span>，则： <span
class="math display">\[
ES^2 =E(\frac 1{n - 1} \sum_{i = 1}^n(X_i - \bar{X})^2) = \frac 1{n - 1}
\sum_{i = 1}^n(E^2(X_i) - 2E(X_i\bar{X}) + E^2(\bar{x}))\\ = \frac 1{n -
1} \sum_{i = 1}^n(\mu^2 + \sigma^2 + \mu^2 + \frac 1n \sigma^2 -
2E(X_i\bar{X}))\\
\because E(X_i\bar{X}) = \frac 1nE(\sum_{1 \le j\le n, j \neq i}X_iX_j)
+ \frac 1nE({X_i}^2) = \frac 1n\sum_{1 \le j\le n, j \neq i}E(X_i)E(X_j)
+ \frac 1nE({X_i}^2)\\ = \mu^2 + \frac 1n \sigma^2\\
\therefore ES^2 = \frac 1{n - 1} \times n \times \frac{n - 1}n\sigma^2 =
\sigma^2
\]</span></p></li>
<li><p>设<span class="math inline">\(\chi^2\)</span> ~ <span
class="math inline">\(\chi^2(n)\)</span>，则当<span
class="math inline">\(n\)</span>足够大时，<span
class="math inline">\(\sqrt{2\chi^2}\)</span>近似服从正态分布<span
class="math inline">\(N(\sqrt{2n-1},1)\)</span></p></li>
<li><p><strong>t分布</strong>：若<span class="math inline">\(X\)</span>
~ <span class="math inline">\(N(0,1)\)</span>, <span
class="math inline">\(Y\)</span> ~ <span
class="math inline">\(\chi^2(N)\)</span>，且<span
class="math inline">\(X\)</span>和<span
class="math inline">\(Y\)</span>相互独立，那么定义<span
class="math inline">\(T\)</span> ~ <span class="math inline">\(t(n) =
\frac{X}{\sqrt{Y/n}}\)</span>为<strong>t分布</strong>.</p>
<p>当<span class="math inline">\(n \to +\infty\)</span>时，<span
class="math inline">\(t(n)\)</span> 可近似为 <span
class="math inline">\(N(0,1)\)</span></p></li>
<li><p><strong>F分布：</strong>若<span class="math inline">\(X\)</span>
~ <span class="math inline">\(\chi^2(n_1)\)</span>， <span
class="math inline">\(Y\)</span> ~ <span
class="math inline">\(\chi^2(n_2)\)</span>，且<span
class="math inline">\(X\)</span>和<span
class="math inline">\(Y\)</span>相互独立，那么定义<span
class="math inline">\(F(n_1,n_2) =
\frac{X/{n_1}}{Y/_{n_2}}\)</span>为<strong>F分布</strong></p>
<p>​ 若<span class="math inline">\(F\)</span> ~ <span
class="math inline">\(F(n_1,n_2)\)</span>,则有$1F $ ~ <span
class="math inline">\(F(n_2,n_1)\)</span>。同时我们有：<span
class="math inline">\(F_{\alpha}(n_2,n_1) = \frac 1{F_{1 -
\alpha}(n_1,n_2)}\)</span></p></li>
<li><p>假设<span
class="math inline">\(X_1,X_2,...,X_n\)</span>均服从<span
class="math inline">\(N(\mu,\sigma^2)\)</span>且相互独立，设<span
class="math inline">\(\bar{X} = \frac 1n \sum_{i = 1}^n
{X_i}\)</span>，<span class="math inline">\(S^2 = \frac 1n \sum_{i =
1}^n(X_i - \bar{X})^2\)</span>，那么：</p>
<ul>
<li>$ _{i = 1}^n (X_i - )^2$ ~ <span
class="math inline">\(\chi^2(n)\)</span></li>
<li>$_{i = 1}^n (X_i - {X})^2 $ ~ <span class="math inline">\(\chi^2 (n
- 1)\)</span> 这条等价为<span class="math inline">\((n - 1)\frac
{S^2}{\sigma^2}\)</span> ~ <span class="math inline">\(\chi^2(n -
1)\)</span></li>
<li><span class="math inline">\(\frac{\bar{X} - \mu}
{\sigma}\sqrt{n}\)</span> ~ <span
class="math inline">\(N(0,1)\)</span>；<br />
</li>
<li><span class="math inline">\(\frac{\bar{X} - \mu}{S}\sqrt{n}\)</span>
~ <span class="math inline">\(t(n - 1)\)</span>；
（这里的S表示标准差，即<span
class="math inline">\(\sqrt{S^2}\)</span>，同时我们可以比较上下发现，当<span
class="math inline">\(n \to \infty\)</span>时，<span
class="math inline">\(t(n - 1) \to N(0,1)\)</span>）</li>
</ul></li>
<li><p>p96 推论6.3 考前看一下，难记</p></li>
<li><p>在正态分布中，不相关和独立是等价的，这是一条很强的结论</p></li>
<li><p>正态分布随机抽样得到<span
class="math inline">\(X_1,X_2,...,X_n\)</span>。那么有<span
class="math inline">\(S^2\)</span>与<span
class="math inline">\(\overline{X}\)</span>独立，且有<span
class="math inline">\(\tilde{S}\)</span>与<span
class="math inline">\(\overline{X}\)</span>独立。</p></li>
</ul>
<h3 id="参数估计部分">参数估计部分</h3>
<p><span class="math inline">\(\hspace{1cm}\)</span>
这部分主要用于处理已经知道一系列样本，要用这些样板来估计分布函数里面的一些参数的问题。</p>
<ul>
<li><p>矩估计：</p>
<ul>
<li><p>若只有一个参数要估计，那只需要用一阶矩来估计即可；
如果有n个参数要估计，那么用前n阶矩来估计</p></li>
<li><p>用第<span class="math inline">\(k\)</span>阶矩来估计的方法：</p>
<ul>
<li>首先计算出总体的<span
class="math inline">\(k\)</span>阶原点矩，这等于<span
class="math inline">\(E(X^k)\)</span>，这应该是一个关于待估计参数的函数</li>
<li>然后计算出样本的<span
class="math inline">\(k\)</span>阶原点矩，这等于<span
class="math inline">\(\frac 1n \sum_{i = 1}^n {X_i}^k\)</span>
，这算出来是一个确定的数</li>
<li>令样本的<span
class="math inline">\(k\)</span>阶原点矩等于总体的<span
class="math inline">\(k\)</span>阶原点矩，得到一个方程用来解待估计的参数</li>
</ul></li>
<li><p>更加一般化地说，就是我们可以用样本的<span
class="math inline">\(k\)</span>阶原点矩作为总体的<span
class="math inline">\(k\)</span>阶原点矩。例如，我们知道样本的<span
class="math inline">\(1\)</span>阶原点矩是<span
class="math inline">\(a\)</span>，样本的<span
class="math inline">\(2\)</span>阶原点矩是<span
class="math inline">\(b\)</span>，现在要求样本的标准差的矩估计。</p>
<p>那么，我们就可以认为<span class="math inline">\(EX = a\)</span>,
<span class="math inline">\(EX^2 = b\)</span>，于是<span
class="math inline">\(D = EX^2 -(EX)^2 = b -
a^2\)</span>，所以我们就认为<span class="math inline">\(\sqrt{b -
a^2}\)</span>是样本的标准差的矩估计。</p></li>
<li><p>我们有如下记号约定：对于一个样本<span
class="math inline">\((X_1,X_2,...,X_n)\)</span>，令 <span
class="math inline">\(\tilde{S}^2 = \frac 1n \sum_{i = 1}^n (X_i -
\overline{X})^2\)</span></p></li>
<li><p>在矩估计法中，认为<span class="math inline">\(DX =
\tilde{S}^2\)</span></p>
<p>证明如下： <span class="math display">\[
\tilde{S}^2 =\frac 1n \sum_{i = 1}^n (X_i - \overline{X})^2 \\ =
\frac 1n \sum_{i = 1}^n{X_i}^2 - \frac 2n \sum_{i =
1}^n{X_i}\overline{X} + \overline{X}^2\\ =  \frac 1n \sum_{i =
1}^n{X_i}^2 - 2\overline{X}^2 + \overline{X}^2 = \frac 1n \sum_{i =
1}^n{X_i}^2 - \overline{X}^2\\ = EX^2 - (EX)^2 = DX
\]</span></p></li>
</ul></li>
<li><p>最大似然估计</p>
<p>即为要让参数取该估计值时，样本发生的概率最大</p></li>
<li><p>设<span class="math inline">\(\hat{\theta} =
\hat{\theta}(X_1,X_2,...,X_n)\)</span>是参数<span
class="math inline">\(\theta\)</span>的估计量，若对于任意的<span
class="math inline">\(\theta \in \Theta\)</span>，都有： <span
class="math display">\[
E(\hat{\theta}) = \theta
\]</span> 那么称<span class="math inline">\(\hat{\theta}\)</span>是<span
class="math inline">\(\theta\)</span>的无偏估计。</p>
<p>设总体方差<span
class="math inline">\(DX=\sigma^2\)</span>存在，那么<span
class="math inline">\(S^2 = \frac 1{n - 1} \sum_{i = 1}^n (X_i -
\overline{X})^2\)</span>是<span
class="math inline">\(\sigma^2\)</span>的无偏估计，而<span
class="math inline">\(\tilde{S}^2 = \frac 1n \sum_{i = 1}^n(X_i -
\overline{X})^2\)</span>是<span
class="math inline">\(\sigma^2\)</span>的有偏估计。</p></li>
</ul>
<h3 id="概率论好题整理">概率论好题整理</h3>
<ol type="1">
<li><p>若<span class="math inline">\(X,Y\)</span>独立，且<span
class="math inline">\(X\)</span> ~ <span
class="math inline">\(P(\lambda_1)\)</span>,<span
class="math inline">\(Y\)</span> ~ <span
class="math inline">\(P(\lambda_2)\)</span>。</p>
<ol type="1">
<li>证明<span class="math inline">\(X + Y\)</span> ~ <span
class="math inline">\(P(\lambda_1 + \lambda_2)\)</span>;
（2）求在已知<span class="math inline">\(X + Y = m\)</span>的条件下<span
class="math inline">\(X\)</span>的分布</li>
</ol></li>
<li><p>已知随机变量<span class="math inline">\(X\)</span>和<span
class="math inline">\(Y\)</span>相互独立，且都服从<span
class="math inline">\(N(0,1)\)</span>，求<span
class="math inline">\(E[max\{X,Y\}]\)</span></p></li>
<li><p>已知<span class="math inline">\(X\)</span> ~ <span
class="math inline">\(N(\mu, \sigma ^2)\)</span>，求<span
class="math inline">\(DX\)</span></p>
<p>首先<span class="math inline">\(EX = \mu\)</span>, 然后： <span
class="math display">\[
DX = E((X - EX)^2) = E((X - \mu)^2) = \int_{-\infty}^{+\infty} \frac 1
{\sqrt{2\pi}\sigma}e^{-\frac {(x - \mu)^2}{2\sigma ^2}}\times (x -
\mu)^2 dx\\ = \int_{-\infty}^{+\infty} \frac 1 {\sqrt{2\pi}\sigma}
e^{\frac{-x^2}{2\sigma^2} }\times x^2 dx = \int_{-\infty}^{+\infty}
\frac 1 {\sqrt{2\pi}\sigma} e^{-(\frac x{\sqrt 2 \sigma})^2} \times
(\frac x{\sqrt 2 \sigma})^2d(\frac {x}{\sqrt 2 \sigma}) \times 2\sqrt 2
\sigma ^3\\ = \frac{2\sigma ^2}{\sqrt{\pi}} \int_{-\infty}^{+\infty}
e^{-x^2} x^2dx
\]</span></p></li>
</ol>
<p>​ 考察积分<span
class="math inline">\(\int_{-\infty}^{+\infty}e^{-x^2}x^2dx\)</span>：
<span class="math display">\[
\int_{-\infty}^{+\infty} e^{-x^2}dx = \left.
xe^{-x^2}\right|_{-\infty}^{+\infty}  +
2\int_{-\infty}^{+\infty}e^{x^2}x^2 dx = \sqrt{\pi}
\]</span> ​ 于是： <span class="math display">\[
\int_{-\infty}^{+\infty}e^{x^2}x^2 dx =\frac {\sqrt \pi}2
\]</span> ​ 所以: <span class="math display">\[
DX = \sigma^2
\]</span></p>
<ol start="4" type="1">
<li>已知<span class="math inline">\(X\)</span> ~ <span
class="math inline">\(N(0,\sigma^2)\)</span>, <span
class="math inline">\(Y\)</span> ~ <span
class="math inline">\(N(0,\sigma ^2)\)</span>，求证：<span
class="math inline">\(X + Y\)</span> ~ <span class="math inline">\(N(0,
2\sigma^2)\)</span>， <span class="math inline">\(X - Y\)</span> ~ <span
class="math inline">\(N(0, 2\sigma^2)\)</span>。</li>
</ol>
<p><strong>超级强的一个结论：</strong>若<span
class="math inline">\(X\)</span> ~ <span
class="math inline">\(N(\mu_1,{\sigma_1}^2)\)</span>，<span
class="math inline">\(Y\)</span> ~ <span
class="math inline">\(N(\mu_2,{\sigma_2}^2)\)</span>，则<span
class="math inline">\(X + Y\)</span> ~ <span
class="math inline">\(N(\mu_1+\mu_2，{\sigma_1}^2+{\sigma_2}^2
)\)</span>，</p>
<p><span class="math inline">\(X - Y\)</span> ~ <span
class="math inline">\(N(\mu1 - \mu
2,{\sigma_1}^2+{\sigma_2}^2  )\)</span></p>
<ol start="5" type="1">
<li><p>设随机变量<span class="math inline">\(X\)</span>与<span
class="math inline">\(Y\)</span>相互独立，且都服从<span
class="math inline">\(N(0, \frac 12)\)</span>分布，求<span
class="math inline">\(E|X - Y|\)</span>以及<span
class="math inline">\(D|X-Y|\)</span> <span class="math display">\[
E|X-Y| = \sqrt{\frac 2 \pi}\ \ \ \ \ \ \ D|X-Y| = 1 - \frac 2 \pi
\]</span></p></li>
<li><p>设随机变量<span class="math inline">\(x\)</span>具有概率密度：
<span class="math display">\[
f(x) = \begin{cases} \frac{x^m}{m!} e^{-x}\ \ \ \ \ \ \ \ x \ge 0\\
0 \ \ \ \ \ \ \  \ \ \ \ \  \ else\end{cases}
\]</span> 其中<span
class="math inline">\(m\)</span>为正整数。请证明：<span
class="math inline">\(P(0 \le X \le 2(m + 1)) \ge \frac m{m +
1}\)</span></p>
<blockquote>
<p>hint: 实际上这个概率密度函数和欧拉给出的 x!
的连续函数的被积函数很像</p>
</blockquote></li>
<li><p>设随机变量<span
class="math inline">\(X,Y\)</span>独立，且分别服从参数为<span
class="math inline">\(\lambda\)</span>和<span
class="math inline">\(\mu\)</span>的泊松分布，求<span
class="math inline">\(E(X|X + Y = m)\)</span></p>
<blockquote>
<p><span class="math inline">\(ans:\frac{m\lambda}{\lambda +
\mu}\)</span></p>
</blockquote></li>
<li><p>假设随机变量<span class="math inline">\(X_1\)</span>在<span
class="math inline">\([0,1]\)</span>上有均匀分布,<span
class="math inline">\(X_i\)</span>在<span
class="math inline">\([X_{i-1},X_{i-1}+1]\)</span>上有均匀分布，其中<span
class="math inline">\(i = 2,3,...,n\)</span>，求<span
class="math inline">\(EX_n\)</span></p>
<p>解：首先<span class="math inline">\(E(X_i|X_{i - 1}) = X_{i - 1} +
\frac 12\)</span>，根据全期望公式，有</p>
<p><span class="math display">\[
E(X_i) = E(E(X_i|X_{i - 1})) = E(x_{i - 1} + \frac 12) = EX_{i - 1} +
\frac 12
\]</span> 而<span class="math inline">\(E_1 = \frac
12\)</span>，所以<span class="math inline">\(E_n = \frac
n2\)</span></p></li>
<li><p>已知<span class="math inline">\(X\)</span> ~ <span
class="math inline">\(N(0,1)\)</span>，求<span
class="math inline">\(E(X^2),D(X^2)\)</span> <span
class="math display">\[
E(X^2) = E^2(X) + D(X) = 1\\
E(X^4) = \int_{-\infty}^{+\infty}\frac
1{\sqrt{2\pi}}e^{-\frac{x^2}2}x^4dx\\
while\ \ \ \int_{-\infty}^{+\infty}e^{-x^2}x^4dx = \frac 34 \sqrt{\pi}\
\ (This \ \ is \ \ similar \ \  to \ \ calculating \ \
\int_{-\infty}^{+\infty}e^{-x^2}x^2 dx)\\
\therefore E(X^4) = 3\\
\therefore D(X^2) = E(X^4)-E^2(X^2) = 3 - 1 = 2
\]</span></p></li>
<li><p>设总体<span class="math inline">\(B\)</span> ~ <span
class="math inline">\(B(1,p)\)</span>,<span
class="math inline">\(p\)</span>为未知参数，<span
class="math inline">\((X_1,X_2,X_3,...,X_n)\)</span> 为来自总体<span
class="math inline">\(X\)</span>的样本，求<span
class="math inline">\(p\)</span>的极大似然估计</p>
<p>第一种做法是<span class="math inline">\(L(\theta) = \prod(X_ip +
(1-X_i)(1-p))\)</span>，这种后续取对然后求驻点是做不下去的</p>
<p>需要写成<span class="math inline">\(L(\theta) = \prod(p^{X_i}(1 -
p)^{1 - X_i})\)</span>，然后后续取对然后求驻点可以做</p></li>
<li><p>设总体<span class="math inline">\(X\)</span>的密度函数为： <span
class="math display">\[
f(x) = \begin{cases}\frac 1 \theta e^{-\frac{x - \mu}\theta}\ \ \ \ x
\ge \mu \\ 0 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x &lt; \mu  \\ \end{cases}
\]</span> 其中<span class="math inline">\(\theta &gt; 0\)</span>，
求未知参数<span class="math inline">\(\mu,
\theta\)</span>的矩估计量</p></li>
</ol>
<p>注意到：<span class="math inline">\(X - \mu\)</span> ~ <span
class="math inline">\(E(\frac 1\theta)\)</span>，</p>
<p>所以：<span class="math inline">\(E(X - \mu)\)</span> = <span
class="math inline">\(\theta\)</span>, <span class="math inline">\(D(X -
\mu) = \theta^2\)</span>， 所以：<span class="math inline">\(EX = \theta
+ \mu, DX = \theta ^2\)</span>， 所以：<span
class="math inline">\(\overline{X} = \theta + \mu, \tilde{S}^2 =
\theta^2\)</span> 所以：<span class="math inline">\(\theta = \tilde{S},
\mu = \overline{X} - \tilde{S}\)</span></p>
<ol start="12" type="1">
<li>若<span class="math inline">\(X\)</span>与<span
class="math inline">\(Y\)</span>不相关，是否有<span
class="math inline">\(f(X)\)</span>与<span
class="math inline">\(g(Y)\)</span>不相关？</li>
<li>若<span
class="math inline">\(X_1,X_2,...,X_n\)</span>独立同分布，是否有<span
class="math inline">\(\overline{X}\)</span>与<span
class="math inline">\(S^2\)</span>不相关？</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/11/25/ICS_Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/25/ICS_Notes/" class="post-title-link" itemprop="url">ICS Notes</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-25 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-25T00:00:00+08:00">2024-11-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 11:00:24" itemprop="dateModified" datetime="2025-01-28T11:00:24+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="ics-notes">ICS Notes</h3>
<ul>
<li>Carry Flag将两个操作数视作无符号数，无符号数加减溢出的时候Carry
Flag会被置为1。在实际执行的加法中，如果两个操作数的符号位相等，但不等于结果的符号位，CF会被置为1，反之为0.
在减法中，如果不够减，那么CF被置为1.</li>
</ul>
<blockquote>
<p><strong>CF (bit 0) Carry flag</strong> — Set if an arithmetic
operation generates a carry or a borrow out of the most significant bit
of the result; cleared otherwise.</p>
</blockquote>
<ul>
<li>Over
Flag将两个操作数视为有符号数。加法时，若CF=1表示加法有进位。减法时，若CF=1表示不够减。</li>
</ul>
<hr />
<ul>
<li><strong>SHL</strong>
逻辑左移，每左移一次，把最高位移到CF里，并在低位补0</li>
<li><strong>SHR</strong>
逻辑右移，每右移一次，把最低位移到CF里，并在高位补0</li>
<li><strong>SAL</strong>
算术左移，和<strong>SHL</strong>一样，只不过若移位前后sign
bit发生变化，那么OF会被置为1</li>
<li><strong>SAR</strong>
算术右移，每右移一次，把最低位移到CF里，并在高位补符号位</li>
<li><strong>ROL</strong>
循环左移，每左移一次，把最高位放到最低位，同时把最高位放到CF里</li>
<li><strong>ROR</strong>
循环右移，每右移一次，把最低位放到最高位，同时把最低位放到CF里</li>
<li><strong>RCL</strong>
把CF当成最高位加到原来的数左边，一起循环左移。</li>
<li><strong>RCR</strong>
把CF当成最低位加到原来的数右边，一起循环右移。</li>
</ul>
<hr />
<ul>
<li><p>JCXZ/JECXZ： jump if CX/ECX is 0</p></li>
<li><p>MUL</p>
<ul>
<li>单操作数 例如MUL A 意思是DX:AX = （AX * A)</li>
<li>双操作数 例如MUL S, D 意思是 D *= S</li>
<li>三操作数 例如MUL n,S,D 意思是 D = S * n, 这里D必须是寄存器</li>
</ul></li>
<li><p>IMUL: 与MUL同理</p></li>
<li><p>机器码里面的操作数如果是立即数存储方法也是小端序的，例如e8 6e ff
ff ff实际上的操作数是ff ff ff 6e</p></li>
</ul>
<hr />
<p>编译器方面的优化方式：</p>
<ol type="1">
<li>提高cache的命中率，例如把二位数组求和改成行优先</li>
<li>提高流水线的命中率，例如①把循环拆开，②采用cmov指令</li>
<li>提高单条指令的运行速度，例如把lea 0(%eax,%eax,3) %eax 改为 SAL
$2,%eax</li>
<li>使用串指令，例如在把一个数组的全部赋为0的任务中，使用memset这一封装了串指令的命令</li>
<li>使用多线程，例如在把一个数组的全部赋为0的任务中，开多个线程分别对数组的各个部分赋0</li>
<li>使用SIMD：一条指令成组操作，节约了时间</li>
<li>变量与寄存器绑定</li>
</ol>
<p>C语言方面的优化方式：</p>
<ol type="1">
<li><p>把*2改为&lt;&lt; 1，提高单调指令的效率</p></li>
<li><p>循环展开，提高流水线效率</p></li>
<li><p>二位数组行优先访问，提高cache命中率</p></li>
<li><p>使用memset等封装了串指令的命令</p></li>
<li><p>register int i</p></li>
<li><p>if （A &amp;&amp; B） 如果A满足概率90%, B 10%，那么写成if (B
&amp;&amp; A)</p></li>
<li><p>把递归改为迭代</p></li>
<li><p>用封装了SIMD的代码</p></li>
<li><p>多线程</p></li>
<li><p>减少重复计算</p></li>
</ol>
<hr />
<p>​</p>
<p>异常：CPU内部产生的错误； 中断：由外部设备产生的“外部事件”</p>
<hr />
<p>Question:</p>
<ul>
<li><p>rela.data节具体是怎么存储信息的？之前在实验四用readelf看的时候没有看到过rela.data节</p>
<blockquote>
<p>存储信息方式同rela.text;</p>
</blockquote></li>
<li><p>软中断（int命令）是异常还是中断？</p>
<blockquote>
<p>是异常</p>
</blockquote></li>
<li><p>栈帧栈顶地址是什么意思？是存返回地址的那个地方是栈顶吗？</p>
<blockquote>
<p>答：不是，是%esp的地址。栈帧的范围是从%ebp到%esp之间（闭区间）</p>
</blockquote></li>
<li><p>我想要让代码跳到0x4011d6处执行，对应的汇编代码不能直接写<code>jmp 0x4011d6</code>，而是得写成</p>
<blockquote>
<p>考试时可以这样写</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov $0x4011d6,%r10</span><br><span class="line">jmp *%r10</span><br></pre></td></tr></table></figure>
<p>这是为什么？</p>
<p>另外，如果我新建一个.s文件然后在里面写<code>jmp 0x4011d6</code>然后汇编，然后再反汇编，得到的反汇编结果是<code>jmp 0x05</code>,这是为什么？</p></li>
<li><p>一般来说，用switch效率是比用很多if要高吗？</p>
<blockquote>
<p>不一定，按习题来</p>
</blockquote></li>
<li><p>extern定义的变量名会不会出现在符号表里面（因为如果不用就不会）？这种变量是不是没有强弱符号的概念？</p></li>
<li><p>在同一个.o文件下，要么全是R_386_32重定位方式，要么全部都是R_386_PC32重定位方式？
看起来不是：（</p></li>
<li><p><strong>栈顶是低地址</strong></p></li>
<li><p><code>b8</code> mov literal, <code>a1</code> mov
直接寻址</p></li>
<li><p>外部变量不会在<code>.data</code>,<code>.bss</code>,<code>.text</code>节中</p></li>
</ul>
<p>假设LP是一个标号，那么JMP LP等价的语句是：</p>
<p><strong>LEA</strong> LP, %EAX</p>
<p>JMP *%EAX</p>
<p>字符之间的比较最好用ja,jb</p>
<p>.data 段里面定义的变量使用的时候可以替换为它的地址。</p>
<p>所有的符号（包括外部符号）只要被引用了就要重定位</p>
<p>如果<span
class="math inline">\(x\)</span>在C语言中是一个无符号数，那么<code>x &gt;&gt;= 1</code>翻译成汇编语言就会时shr</p>
<p>如果<span
class="math inline">\(x\)</span>在C语言中是一个有符号数，那么<code>x &gt;&gt;= 1</code>翻译成汇编语言就会时sar</p>
<p>基址加变址寻址：A(B,C,D)中B和C都必须要是寄存器</p>
<p>没直接问寻址方式就详细答，不放心全都写上</p>
<p><strong>中断描述符表就是中断向量表。</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/11/07/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0&%E7%BA%BF%E6%80%A7%E7%AD%9B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/07/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0&%E7%BA%BF%E6%80%A7%E7%AD%9B/" class="post-title-link" itemprop="url">欧拉函数&线性筛</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-07 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-07T00:00:00+08:00">2024-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 16:43:47" itemprop="dateModified" datetime="2025-01-28T16:43:47+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="欧拉函数线性筛">欧拉函数&amp;线性筛</h1>
<h2 id="定义">1. 定义</h2>
<p><span class="math inline">\(\varphi(n)\)</span> 表示所有与<span
class="math inline">\(n\)</span>互质的正整数<span
class="math inline">\(i\)</span>的个数，其中<span
class="math inline">\(i &lt;= n\)</span>.</p>
<h2 id="欧拉定理">2. 欧拉定理</h2>
<p>欧拉定理是指对于任意互质的正整数<span
class="math inline">\(a\)</span> 和 <span
class="math inline">\(n\)</span>，有:</p>
<p><span class="math display">\[
a^{\varphi(n)} \equiv 1\pmod{n}
\]</span></p>
<h2 id="证明">3. 证明</h2>
<p>记小于<span class="math inline">\(n\)</span>且与<span
class="math inline">\(n\)</span>互质的正整数集合<span
class="math inline">\(R\)</span>为：</p>
<p><span class="math display">\[
R = \{ r_1,r_2,r_3,……,r_{\varphi(n)}\}
\]</span></p>
<p>再令集合S为：</p>
<p><span class="math display">\[
S = \{a\times  r_1 \% n,a \times   r_2 \% n,……,a\times
r_{\varphi(n)}\%n\}
\]</span></p>
<p>现在我们先证明<span
class="math inline">\(S\)</span>中的元素两两互不相同。</p>
<p>反证法：假设存在两个整数<span class="math inline">\(i\)</span>
和<span class="math inline">\(j\)</span>（方便起见，令<span
class="math inline">\(i &lt; j\)</span>）使得<span
class="math inline">\(a \times r_i \% n = a \times r_j \%
n\)</span>,则：</p>
<p><span class="math display">\[
a \times r_i \equiv a \times r_j \pmod{n}
\]</span></p>
<p>又因为<span class="math inline">\(a\)</span>与<span
class="math inline">\(n\)</span>互质，所以<span
class="math inline">\(r_i = r_j\)</span>,而<span class="math inline">\(i
&lt; j\)</span>，即 <span class="math inline">\(r_i \neq
r_j\)</span>，矛盾，所以<span
class="math inline">\(S\)</span>中元素两两互不相同。</p>
<p>又因为<span class="math inline">\(a\)</span> 与 <span
class="math inline">\(n\)</span>互质，<span
class="math inline">\(r_i\)</span>与 n互质，所以易得<span
class="math inline">\(a * r_i \% n\)</span>与 <span
class="math inline">\(n\)</span> 互质，即<span
class="math inline">\(S\)</span>中的元素都与 <span
class="math inline">\(n\)</span> 互质。</p>
<p>所以可以得到 <span class="math inline">\(R = S\)</span>.</p>
<p>所以 ：</p>
<p><span class="math display">\[
\prod_{i = 1}^{\varphi(n)}{r_i} = \prod_{i = 1}^{\varphi(n)}{a \times
r_i\%n}
\]</span></p>
<p><span class="math display">\[
\prod_{i = 1}^{\varphi(n)}{r_i} \equiv \prod_{i = 1}^{\varphi(n)}{r_i
\times a} \pmod{n}
\]</span></p>
<p><span class="math display">\[
\prod_{i = 1}^{\varphi(n)}{r_i} \equiv a^{\varphi(n)}  \times \prod_{i =
1}^{\varphi(n)}{r_i}  \pmod{n}
\]</span></p>
<p>又因为$_{i = 1}^{(n)}{r_i} $ 与 n 互质，</p>
<p>所以： <span class="math display">\[
a^{\varphi(n)} \equiv 1 \pmod{n}
\]</span></p>
<h2 id="线性筛">4.线性筛</h2>
<p>先上代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> prime[maxn],px,l,r,n;</span><br><span class="line"><span class="type">bool</span> b[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!b[i]) </span><br><span class="line">			prime[++px] = i;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=px &amp;&amp; i * prime[j] &lt;= n; j++) &#123;</span><br><span class="line">			b[prime[j] * i] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span> (i % prime[j] == <span class="number">0</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=px; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,prime[i]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>算法的正确性证明中，其实我们要证明的就是两点：</p>
<ul>
<li>每一个合数都会被筛掉。</li>
<li>每一个合数只能被筛一遍（以保证时间复杂度<span
class="math inline">\(O(n)\)</span>)</li>
</ul>
<p>对于第一点，证明如下：</p>
<p>设这个合数为<span class="math inline">\(v\)</span>,则 <span
class="math inline">\(v = p_1 p_2   ……
p_k(p_i&lt;=p_{i+1})\)</span>，<span class="math inline">\(p\)</span> 为
<span class="math inline">\(v\)</span>的质因数。</p>
<p>可以发现，当<span class="math inline">\(i = p_2 \cdot p_3 \cdot  ……
\cdot p_k\)</span>, <span class="math inline">\(prime[j] =
p_1\)</span>时，<span class="math inline">\(i\)</span>与所有小于<span
class="math inline">\(p_1\)</span>的质数互质，所以中途不会被break掉，所以此时<span
class="math inline">\(v\)</span>可以被筛掉。</p>
<p>对于第二点，证明如下：</p>
<p>在第一点中，我们是证明了v会在<span class="math inline">\(i = p_2
\times p_3 \times …… \times p_k\)</span>, <span
class="math inline">\(prime[j] =
p_1\)</span>时被筛掉，那么现在就是要证明除了这种情况外，v不会被筛掉。</p>
<p>设当<span class="math inline">\(i = p_1 \times p_2 \times ... \times
p_{m - 1} \times  p_{m + 1} \times ... \times p_k\)</span> <span
class="math inline">\((p_i &lt;= p_{i + 1})\)</span> 时</p>
<p><span class="math inline">\(prime[j] = p_m(p_m \neq p_1)\)</span>时 v
被筛掉.</p>
<p>可以发现 <span class="math inline">\(p_1 | i\)</span>,所以当<span
class="math inline">\(prime[j] =
p_1\)</span>时就会被break掉，所以v不会在此时被筛掉。</p>
<p>由此，我们可以证明，算法的正确性和时间复杂度的正确性。</p>
<h2 id="求欧拉函数">5.求欧拉函数</h2>
<p>首先，欧拉函数是一个积性函数。</p>
<p>积性函数的定义是：函数<span
class="math inline">\(f(x)\)</span>,若满足<span
class="math inline">\(f(m \times n) = f(m) \times f(n) (gcd(n,m) =
1)\)</span>,那么<span
class="math inline">\(f(x)\)</span>就是一个积性函数。</p>
<p>欧拉函数是一个积性函数。</p>
<p>设$n = p_1^{m_1} p_2^{m_2} p_3^{m_3} …… p_k^{m_k} <span
class="math inline">\(,\)</span>p_iP$，则有：</p>
<p><span class="math display">\[
\varphi(n) = \varphi(p_1^{m_1}) \times \varphi(p_2^{m_2}) \times ……
\times \varphi(p_k^{m_k})
\]</span></p>
<p>对于<span class="math inline">\(\varphi(p^k),p_i \in
P\)</span>，易得<span class="math inline">\(\varphi(p^k) = p^k - p^{k -
1} = p^k \times (1 - \frac{1}{p})\)</span></p>
<p>所以有：</p>
<p><span class="math display">\[
\varphi(n) = p_1^{m_1} \times p_2^{m_2} \times p_3^{m_3} \times ……
\times p_k^{m_k} \times (1 - \frac{1}{p_1}) \times (1 - \frac{1}{p_2})
\times …… \times (1 - \frac{1}{p_k})  \\= n \times (1 - \frac{1}{p1})
\times (1 - \frac{1}{p2}) \times …… \times (1 - \frac{1}{p_k}))
\]</span></p>
<p>特别的，当<span class="math inline">\(n \in P\)</span>时，<span
class="math inline">\(\varphi(n) = n - 1\)</span>.</p>
<p>理解了上面这些，可以上代码了：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> n,phi[maxn],prime[maxn],px;</span><br><span class="line"><span class="type">bool</span> b[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!b[i]) &#123;</span><br><span class="line">			prime[++px] = i;</span><br><span class="line">			phi[i] = i - <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=px &amp;&amp; prime[j] * i &lt;= n; j++) &#123;</span><br><span class="line">			b[i * prime[j]] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span> (i % prime[j] == <span class="number">0</span>) &#123;</span><br><span class="line">				phi[i * prime[j]] = phi[i] * prime[j];</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			phi[i * prime[j]] = phi[i] * phi[prime[j]];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	phi[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,phi[i]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，这个代码是由线性筛变过来的。</p>
<p>当<span class="math inline">\(i \in P\)</span>时，毫无疑问<span
class="math inline">\(\varphi(i) = i - 1\)</span>.</p>
<p>当<span class="math inline">\(i \notin
P\)</span>时，分以下两种情况讨论：</p>
<ul>
<li>若<span class="math inline">\(i \% prime[j] \neq
0\)</span>，因为<span class="math inline">\(prime[j] \in
P\)</span>,所以<span class="math inline">\(gcd(i,prime[j])) =
1\)</span>。因此根据积性函数的定义，有：</li>
</ul>
<p><span class="math display">\[
\varphi(i \times prime[j]) = \varphi(i) \times \varphi(prime[j])
\]</span></p>
<ul>
<li>若<span class="math inline">\(i \% prime[j] = 0\)</span>，因为<span
class="math inline">\(prime[j] \in P\)</span>,所以<span
class="math inline">\(prime[j]\)</span>必定为 i 的一个质因数，所以<span
class="math inline">\(prime[j]\)</span>必定是<span
class="math inline">\(p_1,p_2,p_3,……,p_k\)</span>中的一个，因此得到：
<span class="math display">\[
  \varphi(i \times prime[j]) = i \times prime[j] \times (1 -
\frac{1}{p1}) \times (1 - \frac{1}{p2}) \times …… \times (1 -
\frac{1}{p_k})) = \varphi(i) \times prime[j]
  \]</span></li>
</ul>
<p>最后和线性筛一样，可以证明欧拉函数求法时间复杂度也是线性的。</p>
<p>特别的，<span class="math inline">\(\varphi(1) = 1\)</span>.</p>
<h2 id="一些神奇定理">6.一些神奇定理</h2>
<ul>
<li><p><span class="math inline">\(\sum_{d|n}\varphi(d) =
n\)</span></p></li>
<li><p><span class="math inline">\(\forall n &gt;
1,1-n\)</span>中与n互质的数的和为<span class="math inline">\(n \times
\varphi(n) / 2\)</span></p></li>
<li><p><span class="math inline">\(若gcd(a,n) = 1\)</span> $ 正整数b$
<span class="math inline">\(a^b \equiv a^{b \ mod
\  \varphi(n)}(mod\  n)\)</span></p></li>
<li><p>若<span class="math inline">\(a\)</span>,<span
class="math inline">\(n\)</span>互质，则满足<span
class="math inline">\(a^x \equiv 1 (mod \ n)\)</span>的最小正整数<span
class="math inline">\(x_0\)</span>是<span
class="math inline">\(\varphi(n)\)</span>的约数。</p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/11/03/gdb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/03/gdb/" class="post-title-link" itemprop="url">gdb过程中的一些碎碎念</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-03 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-03T00:00:00+08:00">2024-11-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 10:59:33" itemprop="dateModified" datetime="2025-01-28T10:59:33+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="gdb">gdb</h3>
<ul>
<li><p><code>$esp</code>表示寄存器<code>%esp</code></p></li>
<li><p>可以在特定机器指令的地址上打断点，例如</p>
<p><code>b *0xff3ef23f</code></p>
<p>也可以这样：</p>
<p><code>b *phase_1 + 22</code></p></li>
<li><p>寄存器<code>%pc</code>和<code>%eip</code>中存放的值貌似都是将要执行的下一条指令所在地址</p>
<blockquote>
<p><code>x/1i $pc</code>可以显示将要执行的下一条指令</p>
</blockquote></li>
<li><p>call命令会先把寄存器<code>%ip</code>压栈，然后把<code>%ip</code>赋值为调用的函数开头命令的地址</p></li>
<li><p><code>ret</code>命令相当于就是pop %ip</p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/08/25/2024%E7%89%9B%E5%AE%A2D1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/25/2024%E7%89%9B%E5%AE%A2D1/" class="post-title-link" itemprop="url">2024牛客D1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-08-25 00:00:00" itemprop="dateCreated datePublished" datetime="2024-08-25T00:00:00+08:00">2024-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 10:43:12" itemprop="dateModified" datetime="2025-01-28T10:43:12+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="a">A</h3>
<p>​ Given two integer <span class="math inline">\(n\)</span> and <span
class="math inline">\(m\)</span>, among all the sequence containing n
non-negative integers less than <span
class="math inline">\(2^m\)</span>, you need to count the number of such
sequences <span class="math inline">\(A\)</span> that there exists a
non-empty subsequence of <span class="math inline">\(A\)</span> in which
the bitwise AND of the integers is <span
class="math inline">\(1\)</span>.</p>
<p>​ Since the answer may be very large, output it modulo a positive
integer <span class="math inline">\(q\)</span>.</p>
<p><strong>Input</strong></p>
<p>​ The only line contains three integers <span
class="math inline">\(n,m,q\)</span>. (<span class="math inline">\(1 \le
n,m \le 5000, 1 \le q \le 10^9\)</span>)</p>
<p><strong>Output</strong></p>
<p>​ Output a line containing an integer, denoting the answer.</p>
<p><strong>Sample input 1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 3 998244353</span><br></pre></td></tr></table></figure>
<p><strong>Sample output 1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">17</span><br></pre></td></tr></table></figure>
<p><strong>Sample input 2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5000 5000 998244353</span><br></pre></td></tr></table></figure>
<p><strong>Sample output 2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2274146</span><br></pre></td></tr></table></figure>
<hr />
<p><strong>Solution</strong>:<a
target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1MasWeiEs2/?spm_id_from=333.999.0.0&amp;vd_source=ad1b7dc4c298c14955ef2d4f1bcdb8b0">牛客2024D1TA_哔哩哔哩_bilibili</a></p>
<p><strong>Code</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> f(i,l,r) for (int i=l; i&lt;=r; i++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">5e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> n,m,mo;</span><br><span class="line"><span class="type">int</span> C[maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">1</span>,<span class="number">5000</span>)</span><br><span class="line">		C[i][i] = C[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">2</span>,<span class="number">5000</span>)</span><br><span class="line">		<span class="built_in">f</span>(j,<span class="number">1</span>,i - <span class="number">1</span>) &#123;</span><br><span class="line">			C[i][j] = (C[i - <span class="number">1</span>][j] + C[i - <span class="number">1</span>][j - <span class="number">1</span>]) % mo;			</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ksm</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (y) &#123;</span><br><span class="line">		<span class="keyword">if</span> (y &amp; <span class="number">1</span>)</span><br><span class="line">			(ans *= x) %= mo;</span><br><span class="line">		y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">		(x *= x) %= mo;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m&gt;&gt;mo;</span><br><span class="line">	<span class="built_in">pre</span>();</span><br><span class="line">	<span class="keyword">if</span> (m == <span class="number">1</span>) &#123;</span><br><span class="line">		<span class="type">int</span> ans = <span class="built_in">ksm</span>(<span class="number">2</span>,n) - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> (ans &lt; <span class="number">0</span>) ans += mo;</span><br><span class="line">		cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">0</span>,n) &#123;</span><br><span class="line">		<span class="type">int</span> tmp = <span class="built_in">ksm</span>(<span class="built_in">ksm</span>(<span class="number">2</span>,i) - <span class="number">1</span>,m - <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span> (tmp &lt; <span class="number">0</span>) tmp += mo;</span><br><span class="line">		<span class="type">int</span> oth = <span class="built_in">ksm</span>(<span class="built_in">ksm</span>(<span class="number">2</span>,n - i),m - <span class="number">1</span>);</span><br><span class="line">		<span class="type">int</span> cnt = ((tmp * oth) % mo * C[n][i]) % mo;</span><br><span class="line">		(ans += cnt) %= mo; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (ans &lt; <span class="number">0</span>) ans += mo;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<h3 id="b"><strong>B</strong></h3>
<p>​ Given two integer <span class="math inline">\(n\)</span> and <span
class="math inline">\(m\)</span>, among all the sequence containing n
non-negative integers less than <span
class="math inline">\(2^m\)</span>, you need to count the number of such
sequences <span class="math inline">\(A\)</span> that there exists
<strong>at least two different</strong> non-empty subsequence of <span
class="math inline">\(A\)</span> in which the bitwise AND of the
integers is <span class="math inline">\(1\)</span>.</p>
<p>​ Since the answer may be very large, output it modulo a positive
integer <span class="math inline">\(q\)</span>.</p>
<p><strong>Input</strong></p>
<p>​ The only line contains three integers <span
class="math inline">\(n,m,q\)</span>. (<span class="math inline">\(1 \le
n,m \le 5000, 1 \le q \le 10^9\)</span>)</p>
<p><strong>Output</strong></p>
<p>​ Output a line containing an integer, denoting the answer.</p>
<p><strong>Sample input 1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 3 998244353</span><br></pre></td></tr></table></figure>
<p><strong>Sample output 1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure>
<p><strong>Sample input 2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5000 5000 998244353</span><br></pre></td></tr></table></figure>
<p><strong>Sample output 2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">530227736</span><br></pre></td></tr></table></figure>
<hr />
<p><strong>Solution:</strong> <a
target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV17VsWeUE7L/?spm_id_from=333.999.0.0&amp;vd_source=ad1b7dc4c298c14955ef2d4f1bcdb8b0">牛客2024D1TB_哔哩哔哩_bilibili</a></p>
<p><strong>Code:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> f(i,l,r) for (int i=l; i&lt;=r; ++i)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">5e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> n,m,mo,ans1,ans2;</span><br><span class="line"><span class="type">int</span> C[maxn][maxn],dp[maxn][maxn];</span><br><span class="line"><span class="type">int</span> f[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ksm</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (y) &#123;</span><br><span class="line">		<span class="keyword">if</span> (y &amp; <span class="number">1</span>)</span><br><span class="line">			(ans *= x) %= mo;</span><br><span class="line">		y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">		(x *= x) %= mo;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">1</span>,<span class="number">5000</span>)</span><br><span class="line">		C[i][i] = C[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">2</span>,<span class="number">5000</span>)</span><br><span class="line">		<span class="built_in">f</span>(j,<span class="number">1</span>,i - <span class="number">1</span>) &#123;</span><br><span class="line">			C[i][j] = (C[i - <span class="number">1</span>][j] + C[i - <span class="number">1</span>][j - <span class="number">1</span>]) % mo;			</span><br><span class="line">		&#125;</span><br><span class="line">	f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">1</span>,<span class="number">5000</span>) </span><br><span class="line">		f[i] = (f[i - <span class="number">1</span>] &lt;&lt; <span class="number">1</span>) % mo;</span><br><span class="line">	<span class="comment">//dp[i][j] = ksm(2^i - 1 - j, m - 1)</span></span><br><span class="line">	dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">1</span>,n) &#123;  <span class="comment">// j in [0,i]</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;=i; j+=<span class="number">2</span>)</span><br><span class="line">			dp[i][j] = (dp[i - <span class="number">1</span>][((<span class="number">1</span> + j) &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>] * f[m - <span class="number">1</span>]) % mo;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>; j&lt;=i; j+=<span class="number">2</span>)</span><br><span class="line">			dp[i][j] = <span class="built_in">ksm</span>(f[i] - <span class="number">1</span> - j,m - <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">pre</span>();</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">0</span>,n) &#123;</span><br><span class="line">		<span class="type">int</span> v = f[i] - <span class="number">1</span>; <span class="keyword">if</span> (v &lt; <span class="number">0</span>) v += mo;</span><br><span class="line">		<span class="type">int</span> tmp = (<span class="built_in">ksm</span>(f[i], m - <span class="number">1</span>) - <span class="built_in">ksm</span>(v,m - <span class="number">1</span>)) % mo;</span><br><span class="line">		<span class="keyword">if</span> (tmp &lt; <span class="number">0</span>) tmp += mo;</span><br><span class="line">		<span class="type">int</span> oth = <span class="built_in">ksm</span>(f[n - i],m - <span class="number">1</span>);</span><br><span class="line">		<span class="type">int</span> cnt = ((tmp * oth) % mo * C[n][i]) % mo;</span><br><span class="line">		ans += cnt;</span><br><span class="line">	&#125;</span><br><span class="line">	ans = (<span class="built_in">ksm</span>(f[n],m) - ans) % mo;</span><br><span class="line">	<span class="keyword">if</span> (ans &lt; <span class="number">0</span>) ans += mo;</span><br><span class="line">	ans1 = ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// 	freopen(&quot;in.in&quot;,&quot;r&quot;,stdin);</span></span><br><span class="line"><span class="comment">// 	freopen(&quot;1.out&quot;,&quot;w&quot;,stdout); </span></span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m&gt;&gt;mo;</span><br><span class="line">	<span class="keyword">if</span> (mo == <span class="number">1</span>) &#123;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;0\n&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">solve1</span>();</span><br><span class="line">	<span class="keyword">if</span> (m == <span class="number">1</span>) &#123;</span><br><span class="line">		<span class="type">int</span> <span class="keyword">final</span> = f[n] - n - <span class="number">1</span>; <span class="keyword">final</span> %= mo; <span class="keyword">if</span> (<span class="keyword">final</span> &lt; <span class="number">0</span>) <span class="keyword">final</span> += mo;</span><br><span class="line">		cout&lt;&lt;<span class="keyword">final</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">f</span>(i,<span class="number">0</span>,n) &#123; <span class="comment">// i: the number of how many entry with the least significant bit being 1</span></span><br><span class="line">		<span class="keyword">if</span> (i &gt; m - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">		<span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> p = f[i] - <span class="number">1</span>; </span><br><span class="line">		<span class="built_in">f</span>(j,<span class="number">0</span>,i) &#123;</span><br><span class="line">			<span class="comment">//dp[i][j] = ksm(2^i - 1 - j, m - 1)</span></span><br><span class="line">			<span class="type">int</span> tmp = (dp[i][j] * C[i][j]) % mo;</span><br><span class="line">			<span class="keyword">if</span> (j &amp; <span class="number">1</span>) tmp = (~tmp + <span class="number">1</span>);</span><br><span class="line">			sum += tmp;	</span><br><span class="line">		&#125; </span><br><span class="line">		sum %= mo;</span><br><span class="line"><span class="comment">//		if (sum &lt; 0) sum += mo;</span></span><br><span class="line">		<span class="type">int</span> oth = <span class="built_in">ksm</span>(f[n - i],m - <span class="number">1</span>);</span><br><span class="line">		<span class="type">int</span> loc = ((sum * oth) % mo * C[n][i]) % mo;</span><br><span class="line">		ans2 += loc;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> <span class="keyword">final</span> = (ans1 - ans2) % mo; <span class="keyword">if</span> (<span class="keyword">final</span> &lt; <span class="number">0</span>) <span class="keyword">final</span> += mo;</span><br><span class="line">	cout&lt;&lt;<span class="keyword">final</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	int sum = 0;</span></span><br><span class="line"><span class="comment">		f(j,0,i - 1) &#123;</span></span><br><span class="line"><span class="comment">			int tmp = ksm(n - j,m - 1) * C[i][j];</span></span><br><span class="line"><span class="comment">			if (j &amp; 1) tmp = -tmp; tmp %= mo;</span></span><br><span class="line"><span class="comment">			(sum += tmp) %= mo;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/08/03/CSAPP%20notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/03/CSAPP%20notes/" class="post-title-link" itemprop="url">CSAPP-notes</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-08-03 00:00:00" itemprop="dateCreated datePublished" datetime="2024-08-03T00:00:00+08:00">2024-08-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 11:48:03" itemprop="dateModified" datetime="2025-01-28T11:48:03+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="csapp-notes">CSAPP notes</h2>
<h3 id="lecture-2">Lecture 2</h3>
<ul>
<li><table>
<thead>
<tr>
<th>Argument X</th>
<th>X = 10100010</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>&lt;&lt; 3</strong></td>
<td><strong>X = 00010000</strong></td>
</tr>
<tr>
<td><strong>logical &gt;&gt; 2</strong></td>
<td><strong>X = 00101000</strong></td>
</tr>
<tr>
<td><strong>Arithmetic &gt;&gt; 2</strong></td>
<td><strong>X = 11101000</strong></td>
</tr>
</tbody>
</table>
<p>Logical right shift would fill the high digit with zero.</p>
<p>Arithmetic right shift would fill the high digit with the sign
digit.</p></li>
<li><p>In real world practice, when you do <strong>X &lt;&lt; Y</strong>
in the machine, most machine would actually do <strong>X &lt;&lt; (Y mod
8)</strong> <strong><em>(However, when I test it locally, this mod
operation didn't apply)</em></strong></p></li>
<li><p>The difference between <strong>&amp;&amp;</strong> and
<strong>&amp;</strong>：</p>
<ul>
<li><strong>&amp;&amp;</strong> would only return 0 or 1, while
<strong>&amp;</strong> can return all kinds of integers</li>
<li><strong>&amp;&amp;</strong> would consider any non-zero integer as
1, and consider 0 as 0. <strong>&amp;</strong> certainly don't have this
trait</li>
<li>When the outcome of an expression is known,
<strong>&amp;&amp;</strong> would not calculate the rest of the
expression. For example, if <code>int x = 0</code>, and we calculate
expression <code>a&amp;&amp;(5/a)</code>, it would not raise an
DIVIDEZERO error as the second part would not be calculated. Similarly,
if <code>p</code> is a null pointer, then <code>p&amp;&amp;*p++</code>
would not access a null pointer as the second part would be
omitted.</li>
</ul></li>
<li><p>If you shift left by a negative number, the outcome might not be
a right shift. For example, <code>1 &lt;&lt; (-2)</code> might not be
<code>1 &gt;&gt; 2</code></p></li>
<li><p>A different way to understand <strong>two's
complement</strong></p>
<p>For example, the two's complement of a number is
<code>10110001</code>, then the value of this number should be: <span
class="math display">\[
1\times (-2^7) + 0 \times 2^6 + 1 \times 2^5 + 1 \times 2^4 + 0 \times
2^3 + 0 \times 2^2 + 0 \times 2^1 + 1 \times 2^0
\]</span></p>
<p>In other word, when it comes to two's complement, we consider the
weight of the highest digit to be negative. More accurately, the weight
of the highest digit should be the opposite number of its original
weight.</p></li>
<li><p>If a comparison operation involves two signed numbers, then it
would do it signed ways. If a comparison operation involves two unsigned
umbers, then it would do it unsigned ways.</p>
<p>However, if a comparison operation involves a signed number and an
unsigned number, then it would first transform the signed number into
unsigned form then compare these two unsigned numbers.</p>
<p>For example, if <code>int x = -1; unsigned int y = 0</code>, then
<code>x</code> would be greater than <code>y</code>. In other word,
<code>x &gt; y</code> would be true.</p>
<p>This rule applies to other operations, including add, minus,
etc.</p></li>
<li><p>Define <code>int x = -2147483648</code> might make the compiler
confused for obscure reason. You can do the same thing by
<code>int x = -2147483647 - 1</code></p></li>
<li><p>An example:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">10</span>; i - <span class="keyword">sizeof</span>(<span class="type">char</span>) &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\&quot;,i);</span></span><br></pre></td></tr></table></figure>
<p>For this program, what you will get is just an endless loop.
Why？because <code>sizeof(char)</code> is an unsigned number, making the
whole bunch of <code>i - sizeof(char)</code> to be considered unsigned.
Thus, <code>i - sizeof(char)&gt;=0</code> always holds, making the loop
endless.</p></li>
<li><p>How to promote a smaller type of integer to a larger type of
integer?</p></li>
</ul>
<p><span class="math inline">\(\hspace{1cm}\)</span> For example, if we
have a variable <code>x</code> of type <code>int</code>, how do we cast
it to type <code>long long</code>?</p>
<p><span class="math inline">\(\hspace{1cm}\)</span> Simply by
repeatedly copying the sign digit and insert it to the left until the
number of digit reach the word size of long long.</p>
<p><span class="math inline">\(\hspace{1cm}\)</span> This is both true
when it is a two's complement number and when it is an unsigned
number.</p>
<hr />
<h3 id="lecture-3">Lecture 3</h3>
<ul>
<li><p>Addition for unsigned number (A.K.A. <code>UAdd</code>) :</p>
<p>Computer will just add the two numbers up and abandon the higher
digit if it exceeds the word size.</p>
<p>For unsigned number <code>u</code> and <code>v</code>，perform
addition between them would lead to the result of <span
class="math inline">\((u + v) \% 2^w\)</span> , with <code>w</code>
representing the word size.</p></li>
<li><p>Addition for two's complement number (A.K.A
<code>TAdd</code>):</p>
<p>Computer will do the same thing in <code>UAdd</code>: Add the two
numbers up and abandon the higher digit if it exceeds the word size.</p>
<p>For example, if we have a 4-digit two's complement number
<code>u = 1101</code> and <code>v = 0101</code>. So u is actually -3 and
v is actually 5. Thus, u + v should be 2 arithmetically. When we add the
<code>1101</code> and <code>0101</code>, we got <code>10010</code>, and
we abandon the most significant digit and we got <code>0010</code>,
which is 2 and it matches the arithmetic result.</p>
<p>Another example: <code>u = 1101, v = 1010</code>, so u is actually -3
and v is actually -6, so u + v should be -9 arithmetically. If we add
<code>1101</code> and <code>1010</code>, we got <code>10111</code>.
Abandon the highest digit we got <code>0111</code>, which is 7.</p></li>
<li><p><code>UAdd</code> and <code>TAdd</code> have identical Bit-level
behavior</p></li>
<li><p>Multiplication for unsigned number:</p>
<p>Similar to addition, computer would first calculate the product, then
abandon the higher digit exceeding the word size. Simply put, <span
class="math inline">\(u \times v\)</span> would be <span
class="math inline">\((u \times v) \% (2^w)\)</span>, with <span
class="math inline">\(w\)</span> representing the word size</p></li>
<li><p>Multiplication for two's complement number:</p>
<p>Computer would first calculate the product, then abandon the higher
digit exceeding the word size.</p>
<p>For example, if <code>u=0101</code> and <code>v = 0101</code>, then
<span class="math inline">\(u \times v = 11001\)</span>. Abandon the
highest digit we got <code>1001</code> , that would be -7.</p></li>
<li><p>A property for two's complement</p>
<p>Assume a number <code>x</code> can be represented <span
class="math inline">\((\overline{a_1 a_2 a_3 ... a_n})_2\)</span> in
two's complement. Let's denote <span
class="math inline">\((\overline{a_1 a_2 a_3 ... a_n})_2\)</span> as
<span class="math inline">\([a_1,a_2,...,a_n]\)</span>. And we could
assert that: if <span class="math inline">\(x =
[a_1,a_2,...,a_n]\)</span>, then: <span class="math display">\[
-x = [1 - a_1,1 - a_2, ... , 1 - a_n] +1
\]</span> Notice: the last "+" operation will be done in computer ways,
which means if it overflows, then the highest digit would be
omitted.</p>
<p>For example, 0 = [0,0,0,0], so -0 = [1,1,1,1] +1 = [1,0,0,0,0], then
we omit the highest number, then we could get [0,0,0,0], and the result
is correct.</p></li>
<li><p>It appears that in my computer, when you do a "&gt;&gt;"
operation then it would actually perform <strong>arithmetic
&gt;&gt;</strong></p></li>
<li><p>In a 64-bit word size machine, the address of the memory would be
8-bytes (which is also 64 bits). Thus, if we do
<code>printf("%d\n",sizeof(int*))</code>, then it would probably get
"8".</p></li>
<li><p>Terminology time:</p>
<p><strong>Word</strong> means a range of memory unit storing a specific
type of data. For example, an <code>int</code> word is comprised of 2
bytes, an <code>long long</code> word is comprised of 4 bytes.</p></li>
<li><p>So, how are the bytes within a multi-byte word ordered in
memory?</p>
<p>Two ways: <strong>Big Endian</strong>; <strong>Little
Endian</strong>;</p></li>
</ul>
<p>​ Little Endian is the major way today.</p>
<p>​ The internet still use Big Endian.</p>
<ul>
<li><p>The way to store strings:</p>
<p>Computer would just store the string from head to tail char-wise.
There's no big-endian or little-endian here.</p></li>
</ul>
<p>​ (Notes: IA32 is a little-endian machine, and Sun is a big-endian
machine)</p>
<hr />
<h3 id="lecture-4">Lecture 4</h3>
<ul>
<li><p>An example <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,(<span class="number">2</span>/<span class="number">3</span>)==(<span class="number">2</span>/<span class="number">3.0</span>));</span><br></pre></td></tr></table></figure></p>
<p>In fact, this program would output 0. Because (2/3) is an integer
while (2 / 3.0) is a double number. Thus, the equation can not
hold.</p></li>
<li><p>Implicit Conversion</p>
<p>In the C language, when an operation involves multiple types of
variables, type conversions occurs to make sure that the type of
different variables match. In operations, implicit conversions take
place. Type conversions can also be called as cast.</p>
<ul>
<li>All integer type smaller than <code>int</code> (like
<code>short</code>, <code>char</code>) will be promoted to
<code>int</code></li>
<li>Low precision type will be cast to high precision
type.(<code>int</code> would be cast to <code>float</code>,
<code>float</code> would be cast to <code>double</code>)</li>
</ul></li>
<li><p>Immediate Value</p>
<p>In the C language, immediate value refers to a constant value that is
directly specified in code.</p>
<p>The immediate value is also known as a literal.</p>
<p>In the C language, the immediate value <code>3.14</code> are treated
as type <code>duoble</code> by default.</p></li>
<li><p>IEEE floating point representation</p>
<p>The IEEE float point representation represents a number in the form
<span class="math inline">\(V = (-1)^s \times M \times 2^E\)</span></p>
<p>The sign <code>s</code> determine whether this number is positive or
negative</p>
<p>The exponent <code>E</code> weights the value by a (possibly
negative) power of 2.</p>
<p>Floating-point number are represented in three fields above.</p>
<ul>
<li><p>The single sign bit in the front directly encode sign
<code>s</code></p></li>
<li><p>The <span class="math inline">\(k-bit\)</span> exponent field
<span class="math inline">\(exp = e_{k-1}e_{k - 2}...e_0\)</span>
encodes the exponent <span class="math inline">\(E\)</span></p></li>
<li><p>The <span class="math inline">\(n - bit\)</span> fraction field
<span class="math inline">\(frac = f_{n - 1}f_{n - 2}...f_0\)</span>
encodes the significand <span class="math inline">\(M\)</span></p></li>
<li><p>Normalized Case</p>
<p>When exp is not all 0 and exp is not all 1，it is the normalized
case</p>
<p>In this case, <span class="math inline">\(E = e -
bias\)</span>，where <span class="math inline">\(bias = 2^{k - 1} -
1\)</span> and <span class="math inline">\(e\)</span> is the unsigned
number having the bit representation of <span class="math inline">\(e_{k
- 1}e_{k-  2}...e_0\)</span>.</p>
<p>In this case, <span class="math inline">\(M = (1.f_{n - 1}f_{n -
2}...f_0)_2\)</span></p></li>
<li><p>Denormalized Case</p>
<p>When exp is all 0, it is the denormalized case, used to represent
floating-point number that is close to zero.</p>
<p>In this case, <span class="math inline">\(E = 1 - bias\)</span>,
where <span class="math inline">\(bias = 2^{k - 1} - 1\)</span>.</p>
<p>In this case, <span class="math inline">\(M = (0.f_{n - 1}f_{n -
2}...f_0)_2\)</span></p></li>
<li><p>Special Case A</p>
<p>When exp is all 1, and frac is all 0, this number means infinity. By
assigning s to 1 or 0, we could get positive infinity and negative
infinity.</p></li>
<li><p>Special Case B</p>
<p>When exp is all 1, and frac is not all 0, this number means
<code>NaN</code> (Not a number). Such values are returned as the result
of an operation where the result can not be given as a real number or as
infinity, as when computing <span
class="math inline">\(\sqrt{-1}\)</span> or <span
class="math inline">\(\infty - \infty\)</span> .</p></li>
</ul></li>
<li><p>Why do we have to define denormalized case?</p>
<p>In normalized case, we can not represent 0.</p>
<p>In denormalized case, we can represent 0 as well as some numbers
really close to 0.</p></li>
<li><p>Floating-point Operation</p>
<p>The IEEE standard specifies a simple of way of floating-point
operation. Viewing the two number as real numbers and just do the
operation in mathematical ways, then round the mathematical result to
yield the final result.</p>
<p>If one of the value is special (such as <code>NaN</code>,
<code>infinity</code>,<code>0</code>), the IEEE standard specify a
convention that attempt to be reasonable. To be specific,
<code>1/-0</code> is defined to yield <span
class="math inline">\(-\infty\)</span>, <span
class="math inline">\(\infty - \infty\)</span> is defined to yield
<code>NaN</code>.</p></li>
<li><p>The floating-point addition is commutative but not associative.
For example, a float <code>x = 3.14 + 1e20 - 1e20</code> would yield 0,
while a float <code>x = 3.14 + (1e20 - 1e20)</code> would yield
3.14</p></li>
<li><p>The floating-point multiplication is commutative but not
associative. For example, <code>1e20 * 1e20 * 1e-20</code> would yield
<span class="math inline">\(+\infty\)</span>, while
<code>1e20 * (1e20 * 1e-20)</code> would yield <code>1e20</code></p>
<p>The floating-point multiplication does not distribute over
addition.</p></li>
<li><p>Conversion between <code>int</code>, <code>float</code> and
<code>double</code>:</p>
<ul>
<li><code>int</code> -&gt; <code>float</code>: The number will not
overflow, but it may be rounded.</li>
<li><code>int or float</code> -&gt; <code>double</code>: The number will
not overflow and it will not be rounded. Because it has both greater
range and greater precision.</li>
<li><code>double</code> -&gt; <code>float</code>: The number might
overflow(leading to <span class="math inline">\(+\infty\)</span> or
<span class="math inline">\(-\infty\)</span>) or be rounded.</li>
<li><code>float or double</code> -&gt; <code>int</code>: The number
would be rounded toward <span class="math inline">\(0\)</span>.</li>
</ul></li>
<li><p>Infinity can be compared. It is compared in mathematical
ways.</p></li>
<li><p>For floating-point number <span
class="math inline">\(a\)</span>,<span
class="math inline">\(b\)</span>,<span
class="math inline">\(c\)</span></p>
<ul>
<li>if $ a&gt; b$, then <span class="math inline">\(a + c &gt; b +
c\)</span></li>
<li>If <span class="math inline">\(a &gt; b\)</span>, then <span
class="math inline">\(-a  &lt; -b\)</span></li>
<li>For every floating-point number <span
class="math inline">\(x\)</span>, we have <span class="math inline">\(x
\times x \ge 0\)</span></li>
</ul></li>
</ul>
<hr />
<h3 id="data-lab">Data lab</h3>
<hr />
<h3 id="lecture-5">Lecture 5</h3>
<ul>
<li><p>how to assemble a file <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -S test.c</span><br></pre></td></tr></table></figure></p>
<p>Can assemble <code>test.c</code> into assemble code
<code>test.s</code></p></li>
<li><p>how to disassemble an object code file <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objdump -d <span class="built_in">test</span> &gt; test.d</span><br></pre></td></tr></table></figure></p>
<p>Can disassemble the object code file test into assemble code file
<code>test.d</code></p></li>
<li><p>Use gdb to disassemble a function:</p>
<p>Suppose we have a program code <code>test.c</code> and we want to
disassemble the function <code>build</code> which is in this
program.</p>
<p>First we have to compile <code>test.c</code>:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -Og -o test test.c</span><br></pre></td></tr></table></figure>
<p>Then we type</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdb test</span><br></pre></td></tr></table></figure>
<p>Then we would get into the gdb interface.</p>
<p>After it, we type</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disassemble build</span><br></pre></td></tr></table></figure>
<p>and we could get the disassemble code</p></li>
<li><p>The concept of instruction set:</p>
<p>There are two kinds of prevalent instruction set,
<code>intel x86-64</code> and <code>ARM</code>. Most intel chip use
<code>x86-64</code> while mobile phone chip and apple chip use
<code>ARM</code>. The course is about <code>x86-64</code></p></li>
<li><p>The assembly code usually implement data manipulation in memory
and register. There are 16 register, and there names are as follow:</p>
<table>
<thead>
<tr>
<th>%rax</th>
<th>%r8</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>%rbx</strong></td>
<td><strong>%r9</strong></td>
</tr>
<tr>
<td><strong>%rcx</strong></td>
<td><strong>%r10</strong></td>
</tr>
<tr>
<td><strong>%rdx</strong></td>
<td><strong>%r11</strong></td>
</tr>
<tr>
<td><strong>%rsi</strong></td>
<td><strong>%r12</strong></td>
</tr>
<tr>
<td><strong>%rdi</strong></td>
<td><strong>%r13</strong></td>
</tr>
<tr>
<td><strong>%rsp</strong></td>
<td><strong>%r14</strong></td>
</tr>
<tr>
<td><strong>%rbp</strong></td>
<td><strong>%r15</strong></td>
</tr>
</tbody>
</table></li>
<li><p>the syntax <code>%rax</code> refers to the register
<code>%rax</code>, and the syntax <code>(%rax)</code> refers to the
value in register <code>%rax</code></p></li>
<li><p>A general way to designate address: <span class="math display">\[
D(R_b, R_i, S)
\]</span> <span class="math inline">\(D\)</span> is a constant, <span
class="math inline">\(R_b\)</span> and <span
class="math inline">\(R_i\)</span> are the name of two general-purpose
register, and the <span class="math inline">\(S\)</span> is the scaling
factor restricted to be 1, 2, 4, or 8. This expression specifies an
address, which would be: <span class="math display">\[
D + ([numbers \ \ in \ \ R_b] + S \times [numbers \ \ in \ \ R_i])
\]</span> For example, provided that the number stored in <span
class="math inline">\(R_b\)</span> is <code>0x100</code>, the number
stored in <span class="math inline">\(R_i\)</span> is
<code>0x200</code>, <span class="math inline">\(D = 2\)</span>, <span
class="math inline">\(S = 4\)</span>， then <span
class="math inline">\(D(R_b,R_i,S)\)</span> would designate the address
<code>2 + 0x100 + 0x200 * 4</code>, which is <code>0x902</code>.</p>
<p>(Denote: <code>D</code> is short for <em>displacement</em>, and
<code>S</code> is short for <em>scaling</em>)</p></li>
<li><p>The <code>MOV</code> grammar:</p>
<ul>
<li><p>Move an immediate value to the register:</p>
<p><code>mov $0x4, %rax</code></p>
<p>This would move the immediate value <code>0x4</code> into the
register <code>%rax</code></p>
<p>​</p></li>
<li><p>Move an immediate value to the memory:</p>
<p><code>mov $-147, (%rax)</code></p>
<p>In this case, there is an address stored in the register
<code>%rax</code> and it would move the immediate value
<code>-147</code> to that address in the memory</p></li>
<li><p>Move a value from a register to register</p>
<p><code>mov %rad, %rdx</code></p>
<p>It would copy the value stored in register <code>%rad</code> to
register <code>%rdx</code></p></li>
<li><p>Move a value from a register to memory</p>
<p><code>mov %rax, (%rdx)</code></p>
<p>It would copy the value stored in register <code>%rax</code> to the
address <code>(%rdx)</code> in the memory</p></li>
<li><p>Move a value from memory to register</p>
<p><code>mov (%rax), %rdx</code></p>
<p>vice versa</p></li>
</ul>
<p>Note: you can't move a value from memory directly to memory</p>
<p><strong>Observation:</strong></p>
<p>​ This operation simply move something into a register or the memory.
If it is a register, the second argument should be the name of the
register. If it is the memory, then the second argument should be the
address, usually designated by <code>(the name of a register)</code> or
<code>D(Rb,Ri,S)</code>.</p>
<p>​ The first argument specifies the number we want to move. The first
argument could be an immediate number, the name of a register or an
address. If it is an immediate value, then it means it would move this
literal. If it is the name of a register, then it means it would move
<strong>the number stored in the register</strong>. If it is an address,
it means it would move <strong>the number stored in this
address</strong>.</p></li>
<li><p>The <code>LEA</code> grammar</p>
<p>The general form:<code>LEA first_argument, second_argument</code></p>
<p>The first argument is an address, the second argument must be the
name of a register.</p>
<p>This operation will move the address (the first argument)
<strong>itself</strong> to the second argument (a register or an
address).</p>
<ul>
<li>The difference between <code>LEA</code> and <code>MOV</code>:
<code>LEA</code> would simply move the address <strong>itself</strong>
while <code>MOV</code> would dereference the address and move the value
stored in that address</li>
</ul></li>
</ul>
<p>​ In practice, the first argument can be literal or the name of a
register. This might violate the rule, but compiler still use this,
especially in some arithmetic operation.</p>
<p>​</p>
<blockquote>
<p>Can't understand <code>MOV</code> and <code>LEA</code>? Watch this
video: <a
target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=8rpXUYuV_pM&amp;t=122s">4 MOV vs
LEA (youtube.com)</a></p>
</blockquote>
<ul>
<li><p>In a function, the first parameter passed to the function will be
stored in register <code>%rdi</code>, the second parameter would be
stored in <code>%rsi</code>. The return value of a function would be
stored in register <code>%rax</code></p></li>
<li><p><code>movl</code> instruction：</p>
<p>This instruction could move a 32-bit value from one place to
another.</p>
<ul>
<li><p>From register to register:</p>
<p><code>movl %eax, %ebx</code></p>
<p>This would move the value in <code>%eax</code> to
<code>%ebx</code></p>
<p>(Note: <code>%eax</code> is the lower 32 bits of %rax, so does
<code>%ebx</code>)</p></li>
<li><p>From memory to register</p>
<p><code>movl 0x100(%rbp), %eax</code></p>
<p>This would move the 32-bit value from memory location at
<code>0x100(%rbp)</code> to register <code>%eax</code>. This would load
4 memory units and would load it upside down (because we are talking
about little-endian machine)</p>
<p>For example, here are the number stored in memory:</p>
<table>
<thead>
<tr>
<th>Memory Location</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x100</td>
<td>0x17</td>
</tr>
<tr>
<td>0x101</td>
<td>0x25</td>
</tr>
<tr>
<td>0x102</td>
<td>0x33</td>
</tr>
<tr>
<td>0x103</td>
<td>0x64</td>
</tr>
<tr>
<td>0x104</td>
<td>0x89</td>
</tr>
<tr>
<td>0x105</td>
<td>0x26</td>
</tr>
<tr>
<td>0x106</td>
<td>0x71</td>
</tr>
</tbody>
</table>
<p>If <code>%rbp = 0</code>, then after this operation,
<code>0x64332517</code> would be stored in register
<code>%eax</code>.</p></li>
<li><p>From register to memory</p>
<p>Similar, so omit it.</p></li>
<li><p>Move a literal to memory &amp; Move a literal to register</p>
<p>Similar, so omit it.</p></li>
</ul>
<blockquote>
<p>Note: After the <code>movl</code> operation, the upper-32 bits of the
destination(could be register or memory location) would be set to 0</p>
</blockquote></li>
<li><p>A general property for instructions copying and generating 1-,
2-, 4-, 8- byte values: When the destination is a register, those that
generates 1-,2- byte values leaves the remaining upper bytes unchanged,
while those that generate 4- byte values will set the upper 4 byte to
0.</p></li>
<li><p>The program counter(commonly called <code>%rip</code>) indicates
the address in memory of the next instruction to be executed.</p></li>
<li><p>The regular <code>movq</code> operation can only have immediate
source operand that can be represented in 32-bit two's complement
(Simply put, the immediate source operand must be in the range of <span
class="math inline">\([-2147483648, 2147483647])\)</span>. Then the
compiler would do sign extension to the 32-bit two's complement to make
it 64-bit, then carry out the move.</p>
<blockquote>
<p>What is sign extension?</p>
<p>​ Given a number represented in short-word-length two's complement, we
want to represent this number in a long-word-length two's complement
without changing its arithmetic value. This transformation is called
sign extension.</p>
<p>​ We can finish this task by replicating the sign digit. Whether the
number is positive or not, you will find by doing the replication the
value remain unchanged.</p>
<p>​ For example, <code>0x0011</code> after sign extension becomes
<code>0x000011</code>, the value remains unchanged. (before: 3; after:
3)</p>
<p>​ Another example: <code>0x1100</code> after sign extension becomes
<code>0x111100</code>， and the value remains unchanged (before: -4;
after: -32+16+8+4 = -4;)</p>
</blockquote></li>
<li><p>As mentioned above, the regular <code>movq</code> instruction has
limitation on literal, that's why the instruction<code>movabsq</code>
comes into life. It can move arbitrary 64-bit two's complement literal,
and the destination must be a register.</p></li>
<li><p>When copying from a smaller source to a larger destination (for
example, from a 32-bit to 64-bit), the x86-64 ISA provides two
instructions: <code>movz</code> and <code>movs</code>.</p>
<p><code>movz</code> would set the remaining higher bits to 0, while
<code>movs</code> would fill the remaining higher bits by replicating
the most significant bits of the source operand.</p>
<p>Here are some example:</p></li>
</ul>
<p>​ The operation <code>cltq</code> has the same effect of the operation
<code>movslq</code>, but it has more compact encoding.</p>
<blockquote>
<p><code>cltq</code> is short for `convert l(double word) to q(quad
word)</p>
</blockquote>
<ul>
<li><p>The unary operation:</p>
<p>It has a single operand serving as both resource and destination. For
example, we could have:</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">incq(%rax) # to increment register %rax by 1</span><br><span class="line">decq(%rax) # to decrement register %rax by </span><br></pre></td></tr></table></figure>
<ul>
<li>The arithmetic binary operation:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">addq %rcx, %rax   # to increment register %rax by the value stored in %rcx</span><br><span class="line">subq %rcx, %rax   # to decrement register %rax by the value stored in %rax</span><br><span class="line">mulq %rcx, %rax   # rax &lt;---- (rax * rcx)   (value stored in rax and rcx are considered to be unsigned)</span><br><span class="line">imulq $16, (%rax,%rdx,8) # to multiply the address %rax + 8 * %rdx by a factor of 16 (value involved are considered to be two&#x27;s complement)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>For these binary operations, there are two observations:</p>
<ul>
<li>The source would be the first argument, and the destination would be
the second argument.</li>
<li>The first operand could be an immediate number, a register or a
memory location. The second operand could be an register or a memory
location. However, the first operand and the second operand could not
both be memory location.</li>
</ul>
</blockquote>
<ul>
<li><p>Shift operation:</p>
<p>The operation involves two operand, the first operand specifies the
shift amount, and the second value designates the value we want to
shift. Shift amount usually is a immediate number, but it can also be
the value stored in single-byte register <code>%cl</code>.</p>
<p>A shift operation on the data type that are <code>w</code> bits long
would use the lower <code>m</code> bits of the register
<code>%cl</code>, where <span class="math inline">\(2^m = w\)</span>.
For example, if the register <code>%cl</code> stores the hexadecimal
value of <code>$0XFF</code>, then <code>SALB</code> would shift by 7
digits, <code>SALW</code> would shift by 15 digits, <code>SALL</code>
would shift by 31 digits, and <code>SALQ</code> would shift by 63
digits.</p>
<ul>
<li><p>Left shift:</p>
<p>Comprises two instructions: <code>SAL</code> and <code>SHL</code>.
These instructions have same effect</p></li>
<li><p>Right shift:</p>
<p>Comprises two instructions: <code>SAR</code> and <code>SHR</code>.
The former is the arithmetic right shift, and the latter is the logical
right shift.</p></li>
</ul></li>
<li><p>Single Operand Multiplication:</p>
<p>​ This types comprise two operations: <code>imulq S</code> and
<code>mulq S</code>. The former one is for two's complement, and the
latter one is for unsigned. Apart from this difference, the rest are the
same, so we would only talk about <code>imulq S</code>.</p>
<p>​ The operation <code>imulq S</code> would calculate the value <span
class="math inline">\(S \times M[\%rax]\)</span> keep the all 128-bit
without truncate. Then it would store the higher 64 bits to register
<code>%rdx</code> and store the lower 64 bits to register
<code>%rax</code>.</p>
<p>​</p></li>
<li><p><code>cqto</code> operation:</p>
<p>This would convert a 64-bit value to 128-bit value. Specifically, it
would sign extend <code>%rax</code> to make it to be a 128-bit value,
and then store the upper 64 bit in <code>%rdx</code> and store the
lower-64 bit in <code>%rax</code></p></li>
<li><p><code>divide</code> operation:</p>
<p>There are divide operation: <code>idivq</code> and <code>divq</code>.
Similarly, former one is for two's complement, and the latter one is for
unsigned. Let's just talk about <code>idivq</code> since
<code>divq</code> is the same case.</p>
<p><strong>Syntax for <code>idivq</code>: </strong>
<code>idivq S</code></p>
<ul>
<li>case 1: If the bits of <code>$rdx</code> are all set to the sign bit
of <code>$rax</code> <em>(for operation <code>divq S</code>, we should
look at whether the bits of <code>$rdx</code> are all set to zero)</em>,
then we would consider that the dividend is a 64-bit value stored in
<code>$rax</code>.</li>
<li>case 2: If the bits of <code>$rdx</code> are not all set to the sign
bit of <code>$rax</code> <em>(for operation <code>divq S</code>, we
should look at whether the bits of <code>$rdx</code> are all set to
zero)</em>, then we would consider that the dividend is a 128-bit value,
with higher 64 bits stored in <code>$rdx</code> and lower 64 bits stored
in <code>$rax</code></li>
</ul>
<p>Anyway, after specifying the dividend, then the machine would do the
division, and yield a quotient and a remainder.</p>
<p>The quotient would be stored in <code>$rax</code> and the remainder
would be stored in <code>$rdx</code>.</p></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/08/02/CSAPP%20lecture%206/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/02/CSAPP%20lecture%206/" class="post-title-link" itemprop="url">CSAPP-lecture-6</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-08-02 00:00:00" itemprop="dateCreated datePublished" datetime="2024-08-02T00:00:00+08:00">2024-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 10:47:20" itemprop="dateModified" datetime="2025-01-28T10:47:20+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="csapp-lecture-6">CSAPP lecture 6</h3>
<h4 id="condition-code">1. Condition code</h4>
<ul>
<li><p>Four condition codes:</p>
<ul>
<li>CF: Carry Flag. Will be 1 if there is a carry out of the most
significant bit. Used to detect the overflow of the unsigned number</li>
<li>ZF: Zero Flag. Will be 1 if the most recent operation yield 0.</li>
<li>SF: Sign Flag. Will be 1 if the most recent operation yield a value
with the sign bit being 1.</li>
<li>OF: Overflow Flag. Will be 1 if the most recent operation caused an
overflow (for two's complement), either positive overflow or negative
overflow.</li>
</ul>
<blockquote>
<p>The leaq operation would not alter any of the condition code. All
other arithmetic operation would make these condition code to
change.</p>
</blockquote></li>
<li><p>For the logical operation (such as <code>xor</code>
<code>or</code> <code>add</code>), they will leave the CF and OF to be
0.</p></li>
<li><p>For the shift operation, the CF will be set to the last digit
shifted out, and the OF will be set to 0.</p></li>
<li><p>For the <code>inc</code> and <code>dec</code> operation, they
will set the OF and ZF, but they will leave the CF unchanged.</p></li>
<li><p>There are two instruction classes which can only alter the
condition codes without changing the other value.</p></li>
</ul>
<p>​</p>
<p>​ We can check the sign of a value or whether this value is 0 by
<code>test %rax %rax</code>. (Suppose this value is stored in register
<code>%rax</code>)</p>
<h3 id="access-the-condition-code">2. Access the condition code</h3>
<ul>
<li>Access the condition code: Rather than directly access the condition
code, we prefer to access the condition code indirectly, using the
following 3 methods:
<ul>
<li>We can set a single byte to 0 or 1, depending on some combination of
the condition codes.</li>
<li>We can conditionally jump to some part of the program</li>
<li>We can conditionally transfer data.</li>
</ul></li>
</ul>
<h5 id="how-to-set-a-single-byte-according-to-the-condition-code">2.1
How to set a single byte according to the condition code</h5>
<p>​ These <code>set</code> class of instruction have a single operand
<code>D</code> indicating the destination. The destination have to be a
register or a memory location. If it is a register, then it would set
the least significant byte of the register to 1 (usually this register
have to be <code>%al</code> kind rather than <code>%rax</code>
kind.)</p>
<p>​ an example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">comp:</span><br><span class="line">	cmpq	%rsi %rdi</span><br><span class="line">	setl	%al</span><br><span class="line">	movzbq	%al %rax</span><br><span class="line">	ret</span><br></pre></td></tr></table></figure>
<h5 id="conditionally-jump-to-some-part-of-the-program">2.2
(Conditionally) jump to some part of the program</h5>
<p><strong>Unconditionally jump:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">	movq $0, %rax</span><br><span class="line">	jmp .L1</span><br><span class="line">	movq (%rax), %rdx</span><br><span class="line">.L1:</span><br><span class="line">	popq %rdx</span><br></pre></td></tr></table></figure>
<p>The <code>jmp</code> instruction would jump to <code>.L1</code>
label</p>
<p><code>jmp</code> is the unconditional jump operation. It can jump
directly or indirectly. When it is directly, it's something like
<code>jmp .L1</code>. When it is indirectly, it is something like
<code>jmp *%rax</code> or <code>jmp *(%rax)</code>, where the label is
stored in the register <code>%rax</code> or the memory location
<code>(%rax)</code></p>
<p><strong>Conditional jump:</strong></p>
<h5 id="jump-instruction-encodings">2.3 Jump instruction encodings</h5>
<p>​ In assembly code, to specify where we want to jump to we can simply
write something like <code>.L1</code> happily. In the disassembled
machinery code <strong><em>(the assemble code translated from the
machinery code)</em></strong>, the <code>jump</code> operation would
written in the form like <code>jmp 0x1137</code>. There will be an
address operand like <code>0x1137</code> to specify which operation will
the program jump to. In this case, the jump operation would jump to
<code>0x1137</code> and do the operation in <code>0x1137</code></p>
<p>​ But in machinery code, how to specify where we want to jump to?
There are two ways to do this, first is so called
<code>PC relatives</code>. That is saying, they encode the target
address as the difference between the target address and the address of
the instruction immediately following the jump instruction.</p>
<blockquote>
<p>The difference between a and b is a - b</p>
</blockquote>
<p>​ The reason why we try to use this kind of notation is that the jump
target would remain unchanged when the whole program is shifted to
another address.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eb 03 # In this case, 0x03 is the encoded jump target. 0x03 has to be 							added by the address of the next instruction to get the 								target address. </span><br><span class="line"># &quot;eb 03&quot; is a machine code in binary. &quot;eb&quot; specifies the type of the operation and &quot;03&quot; specifies the encoded jump target</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: this <code>0x03</code> is a two's complement number, so for
example, if now it is <code>0xFF</code>, then it is actually -1, and the
actual jump target would be the address of the next instruction minus
1.</p>
</blockquote>
<p><strong><em>Question</em></strong></p>
<p>​ Sometimes we would see operation <code>jmp .L1</code> and sometimes
we would see operation <code>jmp 0x1137</code>. Which one (probably
both) is the assembly code? What's difference between these two
command?</p>
<h5 id="conditional-move">2.4 Conditional Move</h5>
<p>​ Apart from the <code>jump</code> operation, we have an operation
called conditional move.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="title function_">comp</span><span class="params">(<span class="type">long</span> x,<span class="type">long</span> y)</span> &#123;</span><br><span class="line">    <span class="type">long</span> res;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; y)</span><br><span class="line">        res = y - x; <span class="keyword">else</span></span><br><span class="line">        res = x - y;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For example, this C code might be translated into the following
assembly code:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">absdiff:</span><br><span class="line">	movq 	%rsi, %rax</span><br><span class="line">	subq	%rdi, %rax</span><br><span class="line">	movq	%rdi, %rdx</span><br><span class="line">	subq	%rsi, %rdx</span><br><span class="line">	cmpq	%rsi, %rdi</span><br><span class="line">	cmovge	%rdx, %rax	#If the last comparison said &quot;%rdi &gt;= %rsi&quot;, then this move will 						  conditional move will apply. Otherwise nothing will happen.</span><br><span class="line">	ret</span><br></pre></td></tr></table></figure>
<p><strong><em>Question</em></strong></p>
<p>​ Why will the conditional move operation reduce the penalty for
misprediction? It also need to decide whether to do the move
instruction, and the misprediction should affect the following pipeline
as well.</p>
<p><strong>The class of conditional move:</strong></p>
<p>​ Some property for the conditional move:</p>
<ul>
<li>The destination must be register</li>
<li>The data type can be 2,4,8 bytes long, but can't be 1 byte long</li>
<li>The instruction don't need a suffix to specify the data type. The
processor could infer the operand length from the name of the
destination register.</li>
</ul>
<blockquote>
<p>The condition move may not be valid if one expression is invalid.</p>
<p>for example</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p;</span><br><span class="line"><span class="keyword">if</span> (!p)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="keyword">else</span></span><br><span class="line">    reutnr *p;</span><br></pre></td></tr></table></figure>
<p>You can not calculate <code>*p</code> beforehand as <code>p</code>
may be a null pointer, making the dereferencing invalid.</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://plafle.github.io/2024/06/09/3formulae/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="plafle">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="plafle's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | plafle's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/06/09/3formulae/" class="post-title-link" itemprop="url">Three Formulae</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-06-09 00:00:00" itemprop="dateCreated datePublished" datetime="2024-06-09T00:00:00+08:00">2024-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-01-28 10:42:05" itemprop="dateModified" datetime="2025-01-28T10:42:05+08:00">2025-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><span class="math display">\[
\int\sqrt{a^2 - x^2}dx = \frac x2\sqrt{a^2 - x^2} + \frac
{a^2}2\arcsin(\frac xa) + C
\]</span> <span class="math display">\[
\int \frac 1{\sqrt{x^2 \pm a^2}}dx = \ln|x + \sqrt{x^2 \pm a^2}| + C
\]</span> <span class="math display">\[
\int \sqrt{x^2 \pm a^2}dx = \frac x2 \sqrt{x^2 \pm a^2} \pm\frac
{a^2}2\ln|x + \sqrt{x^2 \pm a^2}| + C
\]</span></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">plafle</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
